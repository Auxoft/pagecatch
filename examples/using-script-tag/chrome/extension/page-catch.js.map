{"version":3,"sources":["webpack:///webpack/bootstrap f8d181891ece0b138f58","webpack:///./src/page-catch.coffee","webpack:///./src/modules/xhr-to-base64.coffee","webpack:///./src/modules/get-relative-link.coffee","webpack:///./src/modules/xhr.coffee","webpack:///./src/modules/inline-css.coffee"],"names":[],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;GAAA;;;;AAAA,eAAc,oBAAQ,CAAR;;AACd,cAAa,oBAAQ,CAAR;;AACb,UAAS,oBAAQ,CAAR;;AACT,aAAY,oBAAQ,CAAR;;AAIZ,wBAAuB,CACrB,yBADqB,EAErB,SAFqB;;AAKjB;;;;;;;;;IAA4B;;AAIlC,aAAY;AACV;GAAA,WAAW;GAEX,YAAY,SAAC,IAAD;AACV;KAAA,WAAW,IAAI,CAAC;AAChB;;OACE,UAAU,KAAV;AADF;KAEA,MAAM,MAAM,CAAC,gBAAP,CAAwB,IAAxB;KACN,OAAO,CAAC,GAAR,CAAY,IAAZ;AACA;UAAA;;OACE,aAAa,GAAI,MAAK,CAAC,OAAV,CAAkB,MAAlB;;;AACb;gBAAM,aAAa,CAAC,CAApB;WACE,WAAW,GAAI,MAAK,CAAC,OAAV,CAAkB,GAAlB,EAAsB,aAAW,CAAjC;WACX,MAAM,GAAI,MAAK,CAAC,SAAV,CAAoB,aAAW,CAA/B,EAAiC,QAAjC;WACN,IAAG,GAAG,CAAC,UAAJ,CAAe,GAAf,KAAuB,GAAG,CAAC,UAAJ,CAAe,GAAf,CAA1B;aACE,MAAM,GAAG,CAAC,SAAJ,CAAc,CAAd,EAAgB,GAAG,CAAC,MAAJ,GAAW,CAA3B,EADR;;WAEA,QAAS,KAAT,GAAgB;WAChB,OAAO,CAAC,MAAR,CAAe,QAAS,KAAxB;WACA,OAAO,CAAC,GAAR,CAAY,MAAZ,EAAmB,GAAnB;yBACA,aAAa,GAAI,MAAK,CAAC,OAAV,CAAkB,MAAlB,EAAyB,WAAS,CAAlC;SARf;;;AAFF;;GANU;GAkBZ,UAAU,QAAQ,CAAC,IAAnB;;AAEA;;;;;GAKA,eAAe;AACb;KAAA,MAAM;;AAEN;;;;KAIA,gBAAgB,SAAC,GAAD;AACd;OAAA,SAAS,GAAG,CAAC;OACb,IAAU,QAAO,MAAjB;AAAA;;OACA,MAAM;AACN;AAAA;;SACE,IAAG,QAAO,KAAV;WACE,MAAM;AACN,iBAFF;;AADF;OAIA,GAAG,CAAC,OAAJ,CAAY,GAAZ;OACA,cAAc,MAAd;KATc;KAWhB,cAAc,MAAd;AACA,YAAO,GAAG,CAAC,IAAJ,CAAS,GAAT;GAnBM;;AAqBf;;;;;;GAMA,iBAAiB,SAAC,GAAD;AACf;KAAA,aAAa;;AAEb;;;;;;KAMA,aAAa,SAAC,GAAD;AACX;OAAA,SAAS;OACT,sBAAsB,SAAC,GAAD;AACpB;SAAA,IAAG,GAAG,CAAC,aAAJ,KAAqB,GAAxB;AAAA;UAAA;WAGE,SAAS,GAAG,CAAC;WACb,WAAW,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAtB,CAA2B,MAAM,CAAC,QAAlC;WACX,QAAQ,QAAQ,CAAC,OAAT,CAAiB,GAAjB;WACR,MAAM,CAAC,OAAP,CAAe,KAAf;kBACA,oBAAoB,MAApB,EAPF;;OADoB;OAStB,oBAAoB,GAApB;AAEA,cAAO,IAAI,CAAC,SAAL,CAAe,MAAf;KAbI;KAeb,SAAS,GAAG,CAAC,oBAAJ,CAAyB,QAAzB;AAET;;OACE,IAAI;AACJ,cAAM,IAAE,MAAM,CAAC,MAAM,CAAC,MAAtB;SACE,IAAG,MAAM,CAAC,aAAP,KAAwB,MAAM,CAAC,MAAO,GAAzC;WAEE,UAAW,YAAW,MAAX,EAAmB,GAAnB,EAAX,GAAsC;WACtC,SAAS;AACT,iBAJF;;SAKA;OANF;AAFF;AASA,YAAO;GAnCQ;;AAqCjB;;;;;;;GAOA,aAAa,SAAC,OAAD;KACX,IAAG,eAAH;AACE,cAAO,CAAC,OAAO,CAAC,IAAT,EAAe,OAAO,CAAC,QAAvB,EAAiC,OAAO,CAAC,QAAzC,EADT;;AAEA,YAAO;GAHI;;AAIb;;;;;;GAMA,eAAe,SAAC,KAAD;AACb;KAAA,MAAM;AACN;;OACE,GAAG,CAAC,IAAJ,CAAS,IAAI,CAAC,QAAd,EAAwB,IAAI,CAAC,SAA7B;AADF;AAEA,YAAO;GAJM;AAOf,UAAO,CACL,QAAQ,CAAC,GADJ,EAEL,QAAQ,CAAC,eAAe,CAAC,SAFpB,EAGL,aAAa,QAAQ,CAAC,eAAe,CAAC,UAAtC,CAHK,EAIL,cAJK,EAKL,eAAe,QAAQ,CAAC,eAAxB,CALK,EAML,WAAW,QAAQ,CAAC,OAApB,CANK,EAOL,QAPK;AApHG;;;AA8HZ;;;;;;AAKA,eAAc,SAAC,QAAD;AACZ;GAAA,QAAQ,QAAQ,CAAC,aAAT,CAAuB,MAAvB;GACR,OAAO,QAAQ,CAAC,aAAT,CAAuB,MAAvB;GACP,IAAI,CAAC,SAAL,GAAiB,QAAQ,CAAC,SAAT,CACf,QAAQ,CAAC,OAAT,CAAiB,OAAjB,CADe,EAEf,QAAQ,CAAC,MAFM;GAIjB,iBAAiB,IAAI,CAAC,oBAAL,CAA0B,MAA1B,CAAkC,GAAE,CAAC;GACtD,KAAK,CAAC,SAAN,GAAkB;GAClB,KAAK,CAAC,oBAAN,CAA2B,MAA3B,CAAmC,GAAE,CAAC,SAAtC,GAAkD,QAAQ,CAAC,SAAT,CAChD,QAAQ,CAAC,OAAT,CAAiB,OAAjB,CADgD,EACrB,QAAQ,CAAC,OAAT,CAAiB,QAAjB,IAA6B,CADR;GAGlD,KAAK,CAAC,oBAAN,CAA2B,MAA3B,CAAmC,GAAE,CAAC,SAAtC,GAAkD,QAAQ,CAAC,SAAT,CAChD,QAAQ,CAAC,OAAT,CAAiB,OAAjB,CADgD,EACrB,QAAQ,CAAC,MADY;GAGlD,OAAO,KAAK,CAAC,oBAAN,CAA2B,MAA3B,CAAmC;AAC1C;;KACE,IAAI,CAAC,YAAL,CAAkB,SAAS,CAAC,IAA5B,EAAkC,SAAS,CAAC,KAA5C;AADF;AAEA,UAAO;AAlBK;;;AAoBd;;;;;;;;AAOA,oBAAmB,SAAC,GAAD,EAAM,GAAN;AACjB;GAAA,SAAS;GACT,sBAAsB,SAAC,GAAD;AACpB;KAAA,IAAG,GAAG,CAAC,aAAJ,KAAqB,GAAxB;AAAA;MAAA;OAGE,SAAS,GAAG,CAAC;OACb,WAAW,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAtB,CAA2B,MAAM,CAAC,QAAlC;OACX,QAAQ,QAAQ,CAAC,OAAT,CAAiB,GAAjB;OACR,MAAM,CAAC,OAAP,CAAe,KAAf;cACA,oBAAoB,MAApB,EAPF;;GADoB;GAStB,oBAAoB,GAApB;AACA,UAAO,IAAI,CAAC,SAAL,CAAe,MAAf;AAZU;;;AAcnB;;;;;AAIA,cAAa,SAAC,QAAD;AACX;GAAA,eAAe,QAAQ,CAAC,gBAAT,CAA0B,kBAA1B;UACf,YAAY,CAAC,OAAb,CAAqB,SAAC,OAAD;AACnB;KAAA,UAAG,OAAO,CAAC,YAAR,CAAqB,YAArB,gBAAsC,oBAAtC,WAAH;2DACuB,CAAE,WAAvB,CAAmC,OAAnC,WADF;;GADmB,CAArB;AAFW;;;AAMb;;;;;AAIA,uBAAsB,SAAC,QAAD;AACpB;GAAA,UAAU,QAAQ,CAAC,gBAAT,CAA0B,iBAA1B;UACV,OAAO,CAAC,OAAR,CAAgB,SAAC,MAAD;YACd,MAAM,CAAC,eAAP,CAAuB,SAAvB;GADc,CAAhB;AAFoB;;;AAKtB;;;;;;;;AAOA,WAAU,SAAC,GAAD,EAAM,GAAN;AACR;GAAA,IAAG,CAAI,GAAG,CAAC,aAAJ,CAAkB,2BAAlB,CAAP;KACE,OAAO,QAAQ,CAAC,aAAT,CAAuB,MAAvB;KACP,IAAI,CAAC,YAAL,CAAkB,MAAlB,EAAyB,cAAzB;KACA,IAAI,CAAC,YAAL,CAAkB,SAAlB,EAA6B,GAA7B;KACA,mEAEE,GAAG,CAAC,oBAAJ,CAAyB,MAAzB,CAAiC;YAEnC,IAAI,CAAC,YAAL,CAAkB,IAAlB,EAAwB,IAAI,CAAC,QAAS,GAAtC,EARF;;AADQ;;;AAWV;;;;;;AAKA,kBAAiB,SAAC,QAAD,EAAU,GAAV;GACf,WAAW,QAAX;GACA,oBAAoB,QAApB;UACA,QAAQ,QAAR,EAAiB,GAAjB;AAHe;;;AAKjB;;;;;;;;AAOA,gBAAe,SAAC,KAAD,EAAQ,MAAR;AACb;GAAA,MAAM;AACN,QAAS,kDAAT;KACE,IAAG,oBAAH;OACE,OAAO,KAAM,GAAN,GAAW,IAAX,GAAkB,KAAM,KAAE,CAAF,CAAxB,GAA+B,KADxC;MAAA;AAGE,aAHF;;AADF;GAMA,IAAG,cAAH;KACE,UAAU,WAAW,MAAX;AAEV,YAAO,UAAU,GAAV,GAAgB,IAHzB;;AAIA,UAAO,OAAO;AAZD;;;AAcf;;;;;;;AAMA,cAAa,SAAC,KAAD;AACX;GAAA,MAAM;GACN,OAAO;AACP,QAAS,qFAAT;KACE,IAAY,CAAI,KAAM,GAAE,CAAC,IAAT,EAAhB;AAAA;;AACA,aAAO,CAAP;AAAA,YACO,CADP;SACc,OAAO,KAAM,GAAN,GAAW;AAAzB;AADP,YAEO,CAFP;SAEc,OAAO,YAAY,GAAZ,GAAkB,KAAM,GAAxB,GAA6B;AAA3C;AAFP,YAGO,CAHP;SAGc,OAAO,MAAM,KAAM,GAAZ,GAAiB;AAHtC;AAFF;AAOA,UAAO,MAAM;AAVF;;;AAYb;;;;;;;;;AAQA,WAAU,SAAC,KAAD,EAAQ,OAAR,EAAiB,IAAjB;AACR;GAAA,aAAa;GACb,OAAO;;AAEP;;;;GAIA,QAAQ,SAAC,QAAD;AACN;KAAA,4CAAsB,CAAE,QAAQ,CAAC,gBAAzB,CAA0C,QAA1C;AACR;;OACE,IAAG,IAAI,CAAC,YAAL,CAAkB,MAAlB,MAA6B,cAAhC;SACE,OAAO;SACP,SAAS,CAAT,EAAY,CAAZ;AACA,gBAHF;;AADF;KAKA,mBAAmB;KACnB,aAAa;AACb;;OACE,aAAa,GAAG,CAAC,QAAQ,CAAC,gBAAb,CAA8B,UAA9B;AACb;;SACE;SACA,UAAU,GAAG,CAAC,YAAJ,CAAiB,OAAjB,CAAV,EAAqC,GAArC,EAA0C,GAAG,CAAC,GAA9C,EAAmD,GAAG,CAAC,UAAvD,EACE,SAAC,KAAD,EAAQ,GAAR,EAAa,MAAb;WACE;WACA,IAAG,aAAH;aACE,OAAO,CAAC,KAAR,CAAc,kBAAd,EAAkC,KAAlC,EADF;YAAA;aAGE,GAAG,CAAC,YAAJ,CAAiB,OAAjB,EAA0B,MAA1B,EAHF;;kBAIA,SAAS,UAAT,EAAqB,gBAArB;SANF,CADF;AAFF;OAUA,OAAO,GAAG,CAAC,QAAQ,CAAC,gBAAb,CAA8B,gBAA9B;AACP;;SACE;SACA,IAAG,GAAG,CAAC,YAAJ,CAAiB,QAAjB,CAAH;WACE,GAAG,CAAC,YAAJ,CAAiB,QAAjB,EAA0B,EAA1B,EADF;;SAEA,IAAG,GAAG,CAAC,YAAJ,CAAiB,KAAjB,CAAH;WACE,MAAM,WAAW,GAAG,CAAC,YAAJ,CAAiB,KAAjB,CAAX,EAAoC,GAAG,CAAC,GAAxC;WACN,YAAY,GAAZ,EAAiB,GAAjB,EAAsB,SAAC,KAAD,EAAQ,GAAR,EAAa,MAAb;aACpB;aACA,IAAG,aAAH;eACE,OAAO,CAAC,KAAR,CAAc,qBAAd,EAAqC,KAAK,CAAC,KAA3C,EADF;cAAA;eAGE,GAAG,CAAC,YAAJ,CAAiB,KAAjB,EAAwB,MAAxB,EAHF;;oBAIA,SAAS,UAAT,EAAqB,gBAArB;WANoB,CAAtB,EAFF;UAAA,MASK,IAAG,GAAG,CAAC,YAAJ,CAAiB,MAAjB,CAAH;WACH,IAAG,GAAG,CAAC,YAAJ,CAAiB,KAAjB,MAA2B,YAA9B;aACE,OAAO,WAAW,GAAG,CAAC,YAAJ,CAAiB,MAAjB,CAAX,EAAqC,GAAG,CAAC,GAAzC;aAEP,UAAU,OAAO,IAAP,CAAV,EAAwB,GAAxB,EAA6B,IAA7B,EAAmC,GAAG,CAAC,UAAvC,EACE,SAAC,KAAD,EAAQ,GAAR,EAAa,MAAb;AACE;eAAA,IAAG,aAAH;iBACE,OAAO,CAAC,KAAR,CAAc,aAAd,EAA6B,KAA7B,EADF;gBAAA;iBAGE;iBACA,OAAO,CAAC,GAAR,CAAY,gBAAZ,EAA8B,GAA9B;iBACA,QAAQ,QAAQ,CAAC,aAAT,CAAuB,OAAvB;iBAGR,KAAK,CAAC,SAAN,GAAkB;iBAClB,SAAS,GAAG,CAAC;iBACb,GAAG,CAAC,aAAa,CAAC,YAAlB,CAA+B,KAA/B,EAAsC,GAAtC;iBACA,GAAG,CAAC,aAAa,CAAC,WAAlB,CAA8B,GAA9B,EAXF;;sBAYA,SAAS,UAAT,EAAqB,gBAArB;aAbF,CADF,EAHF;YAAA;aAmBE,OAAO,WAAW,GAAG,CAAC,YAAJ,CAAiB,MAAjB,CAAX,EAAqC,GAAG,CAAC,GAAzC;aACP,YAAY,IAAZ,EAAkB,GAAlB,EAAuB,SAAC,KAAD,EAAQ,GAAR,EAAa,MAAb;eACrB;eACA,IAAG,aAAH;iBACE,OAAO,CAAC,KAAR,CAAc,oCAAkC,IAAlC,GAAuC,IAArD,EACE,KAAK,CAAC,KADR,EADF;gBAAA;iBAIE,GAAG,CAAC,YAAJ,CAAiB,MAAjB,EAAyB,MAAzB,EAJF;;sBAKA,SAAS,UAAT,EAAqB,gBAArB;aAPqB,CAAvB,EApBF;YADG;UAAA;WA+BH,UAAU,GAAG,CAAC,SAAd,EAAyB,GAAzB,EAA8B,GAAG,CAAC,GAAlC,EAAuC,GAAG,CAAC,UAA3C,EACE,SAAC,KAAD,EAAQ,GAAR,EAAa,MAAb;aAEE;aACA,IAAG,aAAH;eACE,OAAO,CAAC,KAAR,CAAc,yBAAd,EAAyC,KAAK,CAAC,KAA/C;eACA,OAAO,CAAC,KAAR,CAAc,GAAG,CAAC,SAAlB,EAFF;cAAA;eAIE,GAAG,CAAC,SAAJ,GAAgB,OAJlB;;oBAKA,SAAS,UAAT,EAAqB,gBAArB;WARF,CADF,EA/BG;;AAbP;AAbF;YAmEA,OAAO;GA5ED;;AA6ER;;;;;GAKA,eAAe,SAAC,GAAD,EAAM,GAAN;AACb;KAAA,SAAS,GAAG,CAAC,QAAQ,CAAC,oBAAb,CAAkC,QAAlC;AACT;UAAA;;OACE,WAAW,iBAAiB,KAAjB,EAAwB,GAAG,CAAC,QAA5B;OAEX,QAAQ,CAAC;AACT;SAEE,IAAG,aAAY,GAAf;WACE,QAAO,GAAG,CAAC,SAAU,MADvB;;AAFF;OAIA,IAAG,UAAS,CAAC,CAAb;AACE,kBADF;;OAEA,MAAM,MAAM;OACZ,IAAG,uBAAH;SACE,aAAa,UAAW,KAAxB,EAA8B,MAAI,GAAlC;SACA,OAAO,UAAW,KAAI,CAAC;SACvB,YAAY,UAAW,KAAI,CAAC;SAC5B,eAAe,SAAf,EAA0B,IAA1B;;WACA,QAAS,WAAW;;SACpB,SAAS,aACP,UAAW,KAAI,CAAC,MADT,EAEP,UAAW,KAAI,CAAC,OAFT,IAGL,SAAS,CAAC,SAHL,GAGiB;sBAC1B,KAAK,CAAC,YAAN,CAAmB,QAAnB,EAA6B,MAA7B,GAVF;QAAA;8BAAA;;AAXF;;GAFa;;AAyBf;;;;;GAKA,WAAW,SAAC,OAAD,EAAU,QAAV;AAET;KAAA,IAAG,YAAW,CAAX,IAAiB,aAAY,CAA7B,IAAmC,SAAQ,IAA9C;OACE,aAAa,UAAW,IAAxB,EAA4B,EAA5B;OACA,OAAO,UAAW,IAAG,CAAC;OACtB,YAAY,UAAW,IAAG,CAAC;OAC3B,eAAe,SAAf,EAA0B,IAA1B;;SACA,QAAS,WAAW;;OACpB,SAAS,aACP,UAAW,IAAG,CAAC,MADR,EACgB,UAAW,IAAG,CAAC,OAD/B,IAEL,SAAS,CAAC,SAFL,GAEiB;;SAC1B,KAAM;;OACN,aAAa;cACb,OAAO,MAXT;;GAFS;UAiBX,MAAM,CAAC,IAAI,CAAC,aAAZ,CAA0B,KAA1B,EACE;KAAA,MAAM,MAAM,SAAS,CAAC,QAAV,EAAN,GAA6B,KAAnC;KAKA,WAAW,IALX;KAMA,iBAAiB,IANjB;IADF,EAQE,SAAC,MAAD;AAEA;AAAA;;OACE,MACE;SAAA,KAAK,GAAI,GAAT;SACA,QAAQ,GAAI,GADZ;SAEA,UAAU,YAAY,GAAI,GAAhB,CAFV;SAGA,WAAW,GAAI,GAHf;SAIA,SAAS,GAAI,GAJb;SAKA,YAAY,GAAI,GALhB;;OAMF,UAAW,IAAI,GAAJ,CAAX,GAAqB;AARvB;YAUA,MAAM,QAAN;GAZA,CARF;AAzIQ;;AA+JV,OAAM,CAAC,OAAP,GAAiB;;;;;;;ACzbjB;;AAAA,eAAc,SAAC,GAAD,EAAM,IAAN,EAAY,QAAZ;AACZ;GAAA,IAAG,GAAG,CAAC,OAAJ,CAAY,OAAZ,KAAwB,CAA3B;YACE,SAAS,IAAT,EAAe,IAAf,EAAqB,GAArB,EADF;IAAA;KAIE,MAAU;KACV,GAAG,CAAC,IAAJ,CAAS,KAAT,EAAgB,GAAhB,EAAqB,IAArB;KACA,GAAG,CAAC,YAAJ,GAAmB;KACnB,SAAa;KAEb,GAAG,CAAC,MAAJ,GAAa,SAAC,CAAD;AAEX;OAAA,IAAG,IAAI,CAAC,MAAL,KAAe,GAAlB;gBACE,SAAS,IAAT,EAAe,IAAf,EAAqB,GAArB,EAA0B,GAA1B,EADF;QAAA;SAGE,OAAO,IAAI,CAAC;SACZ,MAAM,CAAC,SAAP,GAAmB;kBACjB,SAAS,IAAT,EAAe,IAAf,EAAqB,MAAM,CAAC,MAA5B,EAAoC,GAApC;SADiB;gBAEnB,MAAM,CAAC,aAAP,CAAqB,IAArB,EANF;;KAFW;KAUb,GAAG,CAAC,OAAJ,GAAc,SAAC,CAAD;OACZ,OAAO,CAAC,KAAR,CAAc,eACZ,CAAC,CAAC,MAAM,CAAC,MADG,GAEZ,yCAFF;cAGA,SAAS,CAAT,EAAY,IAAZ,EAAkB,GAAlB,EAAsB,GAAtB;KAJY;YAMd,GAAG,CAAC,IAAJ,GAzBF;;AADY;;AA4Bd,OAAM,CAAC,OAAP,GAAiB;;;;;;;AC5BjB;;AAAA,OAAM,CAAC,OAAP,GAAiB,SAAC,GAAD,EAAM,IAAN;AACf;GAAA,OAAO;GACP,MAAM,GAAG,CAAC,OAAJ,CAAY,KAAZ,EAAmB,EAAnB;GAGN,IACE,CAAC,GAAI,GAAJ,KAAU,GAAV,IAAkB,GAAI,IAAG,CAAC,MAAJ,GAAa,CAAb,CAAJ,KAAuB,GAA1C,KACA,CAAC,GAAI,GAAJ,KAAU,GAAV,IAAkB,GAAI,IAAG,CAAC,MAAJ,GAAa,CAAb,CAAJ,KAAuB,GAA1C,CAFF;KAIE,MAAK,GAAG,CAAC,MAAJ,CAAW,CAAX,EAAc,GAAG,CAAC,MAAJ,GAAa,CAA3B,EAJP;;GAMA,IAAG,GAAG,CAAC,UAAJ,CAAe,OAAf,CAAH;AAEE,YAAO,IAFT;;GAIA,IAAG,GAAG,CAAC,UAAJ,CAAe,IAAf,CAAH;AACE,YAAO,WAAW,IADpB;;GAGA,IAAG,GAAG,CAAC,KAAJ,CAAU,cAAV,CAAH;AACE,YAAO,IADT;;GAGA,IAAG,GAAI,GAAJ,KAAU,GAAV,IAAkB,GAAI,GAAJ,KAAU,GAA/B;KACE,OAAO;KACP,WAAW,IAAI,CAAC,KAAL,CAAW,GAAX;KACX,WAAW,QAAQ,CAAC,KAAT,CAAe,CAAf,EAAkB,CAAlB;KACX,OAAO,QAAQ,CAAC,IAAT,CAAc,GAAd;AAEP,YAAO,OAAK,IANd;;GAOA,WAAW,IAAI,CAAC,KAAL,CAAW,GAAX;GAIX,IAAG,aAAO,QAAS,SAAQ,CAAC,MAAT,GAAgB,CAAhB,CAAhB,eAAuC,CAAI,IAA9C;KACE,QAAQ,CAAC,GAAT,GADF;;GAGA,YAAY,GAAG,CAAC,KAAJ,CAAU,GAAV;AAGZ;;KACE,IAAG,aAAY,IAAf;OACE,QAAQ,CAAC,GAAT,GADF;MAAA;OAGE,QAAQ,CAAC,IAAT,CAAc,QAAd,EAHF;;AADF;AAMA,UAAO,QAAQ,CAAC,IAAT,CAAc,GAAd;AA5CQ;;;;;;;ACAjB,OAAM,CAAC,OAAP,GAAiB,SAAC,GAAD;AACf;AAAA;KAEE,MAAU;KACV,GAAG,CAAC,IAAJ,CAAS,KAAT,EAAgB,GAAhB,EAAqB,KAArB;KACA,GAAG,CAAC,IAAJ;KACA,IAAG,GAAG,CAAC,MAAJ,KAAa,GAAhB;AACE,cAAO,GAAG,CAAC,aADb;MAAA;AAGE,cAAO,IAHT;MALF;IAAA;KASM;KACJ,OAAO,CAAC,KAAR,CAAc,KAAd,EAAqB,CAAC,CAAC,KAAvB;AACA,YAAO,IAXT;;AADe;;;;;;;ACAjB;;AAAA,cAAa,oBAAQ,CAAR;;AACb,mBAAkB,oBAAQ,CAAR;;AAGlB,OAAM,CAAC,OAAP,GAAiB,SAAC,GAAD,EAAM,GAAN,EAAW,MAAX,EAAmB,UAAnB,EAA+B,QAA/B;AACf;GAAA,OAAO;GACP,IAAG,GAAG,CAAC,OAAJ,CAAY,MAAZ,IAAsB,CAAzB;YACE,SAAS,IAAT,EAAe,GAAf,EAAoB,GAApB,EADF;IAAA;KAIE,SAAS;KACT,UAAU;KACV,UAAU;KACV,YAAY;KACZ,SAAU;AACV,YAAM,gCAAN;OACE,OAAO,CAAC,IAAR,CAAa,GAAI,GAAjB,EAAqB,GAAI,GAAzB;OACA,MAAM,CAAC,IAAP,CAAY,WAAW,GAAI,GAAf,EAAmB,MAAnB,CAAZ;OACA,YAAY,MAAM,CAAC;KAHrB;KAIA,OAAO,CAAC,IAAR,CAAa,GAAI,iBAAjB;KAEA,UAAU;AACV,UAAS,sFAAT;OACE,IAAG,UAAW,OAAO,GAAP,CAAd;SACE,OAAO;SACP,UAAW,OAAO,GAAP;SACX;SACA,OAAO,CAAC,GAAR,CAAY,WAAZ,EAAwB,OAAxB;SACA,gBAAgB,MAAO,GAAvB,EAA2B,GAA3B,EAAgC,SAAC,KAAD,EAAQ,GAAR,EAAa,MAAb,EAAqB,GAArB;AAC9B;WAAA;WACA,OAAO,CAAC,GAAR,CAAY,OAAZ;WACA,IAAG,aAAH;aACE,OAAO,CAAC,KAAR,CAAc,eAAd,EAA+B,KAAK,CAAC,KAArC,EADF;YAAA;aAGE,UAAW,KAAX,GAAkB,OAHpB;;WAIA,IAAG,YAAW,CAAd;aACE,OAAO,CAAC,GAAR,CAAY,UAAZ;aACA,MAAM;aACN,QAAQ;aACR,WAAW;AACX,oBAAM,QAAQ,OAAO,CAAC,MAAtB;eACE,GAAG,CAAC,IAAJ,CAAS,OAAQ,OAAjB;eACA;eACA,IAAG,wBAAH;iBACE,IAAG,UAAW,OAAO,UAAP,CAAd;mBACE,OAAO,CAAC,GAAR,CAAY,KAAZ,EAAmB,UAAW,OAAO,UAAP,CAA9B;mBACA,GAAG,CAAC,IAAJ,CAAS,MAAI,UAAW,OAAO,UAAP,CAAf,GAAiC,GAA1C,EAFF;kBAAA;mBAIE,GAAG,CAAC,IAAJ,CAAS,EAAT,EAJF;kBADF;;eAMA,IAAE,CAAC,sBAAD,CAAF;iBACE,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,OAAQ,OAAnC;iBACA,GAAG,CAAC,IAAJ,CAAS,OAAQ,OAAjB,EAFF;;eAGA;eACA;aAbF;oBAcA,SAAS,IAAT,EAAe,GAAf,EAAoB,GAAG,CAAC,IAAJ,CAAS,EAAT,CAApB,EAnBF;;SAP8B,CAAhC,EALF;;AADF;KAiCA,IAAG,CAAC,IAAJ;cACE,SAAS,IAAT,EAAe,GAAf,EAAoB,OAAO,CAAC,IAAR,CAAa,EAAb,CAApB,EADF;MAjDF;;AAFe","file":"page-catch.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f8d181891ece0b138f58","xhrToBase64 = require './modules/xhr-to-base64.coffee'\r\nconvertURL = require './modules/get-relative-link.coffee'\r\ngetXHR = require './modules/xhr.coffee'\r\ninlineCSS = require './modules/inline-css.coffee'\r\n\r\n\r\n\r\nMETA_ATTRIBS_FOR_DEL = [\r\n  'Content-Security-Policy'\r\n  'refresh'\r\n]\r\n\r\nclass TreeElementNotFound extends Error\r\n\r\n\r\n# get array with information of every frame\r\ngetSource = () ->\r\n  linksObj = {}\r\n\r\n  getUrlMas = (elem) ->\r\n    children = elem.children\r\n    for child in children\r\n      getUrlMas(child)\r\n    obj = window.getComputedStyle(elem)\r\n    console.log elem\r\n    for elem in obj\r\n      startIndex = obj[elem].indexOf('url(')\r\n      while startIndex > -1\r\n        endIndex = obj[elem].indexOf(')',startIndex+1)\r\n        key = obj[elem].substring startIndex+4,endIndex\r\n        if key.startsWith('\"') or key.startsWith(\"'\")\r\n          key = key.substring(1,key.length-1)\r\n        linksObj[key] = true\r\n        console.assert linksObj[key]\r\n        console.log 'ELEM',key\r\n        startIndex = obj[elem].indexOf('url(',endIndex+1)\r\n\r\n  getUrlMas(document.body)\r\n  \r\n  ###!\r\n  # get frame index in page\r\n  # @return {String} - frame index\r\n  # @example 0:3:5\r\n  ###\r\n  getFramePath = () ->\r\n    fid = []\r\n\r\n    ###!\r\n    # add frame-ID into fid[] array (recursive)\r\n    # @param {Window} win - parent's Window object\r\n    ###\r\n    _get_frame_id = (win) ->\r\n      parent = win.parent\r\n      return if win == parent\r\n      idx = '?'\r\n      for frame, frame_idx in parent.frames\r\n        if win == frame\r\n          idx = frame_idx\r\n          break\r\n      fid.unshift idx\r\n      _get_frame_id(parent)\r\n      return\r\n    _get_frame_id(window)\r\n    return fid.join ':'\r\n\r\n  ###!\r\n  # get frame position on content script\r\n  # @param {HTMLDocument} DOM - DOM document object\r\n  # @return {Object} - frames position on current frame\r\n  # @example [3,0,0]: 0\r\n  ###\r\n  getElementPath = (DOM) ->\r\n    dictionary = {}\r\n\r\n    ###!\r\n    # get frameID\r\n    # @param {HTMLIframeElement} obj - iframe document object\r\n    # @return {String} - string with index iframe\r\n    # @example [3,0,0]\r\n    ###\r\n    getFrameId = (obj) ->\r\n      result = []\r\n      _getPositionOfFrame = (obj)->\r\n        if obj.parentElement == DOM\r\n          return\r\n        else\r\n          parent = obj.parentElement\r\n          nodeList = Array.prototype.slice.call(parent.children)\r\n          index = nodeList.indexOf(obj)\r\n          result.unshift(index)\r\n          _getPositionOfFrame(parent)\r\n      _getPositionOfFrame(obj)\r\n      #console.log result\r\n      return JSON.stringify(result)\r\n\r\n    frames = DOM.getElementsByTagName 'iframe'\r\n    #console.log frames.length\r\n    for iframe in frames\r\n      i = 0\r\n      while i<window.frames.length\r\n        if iframe.contentWindow == window.frames[i]\r\n          #console.log getFrameId(iframe, DOM)\r\n          dictionary[getFrameId(iframe, DOM)] = i\r\n          result = []\r\n          break\r\n        i++\r\n    return dictionary\r\n\r\n  ###!\r\n  # get page doctype with all atributes'\r\n  # @param {DocumentType} doctype - document doctype object\r\n  # @return {array} - array with attributes of doctype page\r\n  # @return null - if doctype is absent\r\n  # @example [\"html\",\"w3c\",\"\"]\r\n  ###\r\n  getDoctype = (doctype)->\r\n    if doctype?\r\n      return [doctype.name, doctype.publicId, doctype.systemId]\r\n    return null\r\n  ###!\r\n  # get attributes of tag <html ...>...</html>\r\n  # @param {array} array - array with html attributes\r\n  # @return {array} - array with attributes of tag <html>\r\n  # @example [\"lang\",\"en\",\"class\",\"is-copy-enable\"]\r\n  ###\r\n  getAttribute = (array)->\r\n    mas = []\r\n    for elem in array\r\n      mas.push(elem.nodeName, elem.nodeValue)\r\n    return mas\r\n  # Function returns iframe url, content, html-atributes,\r\n  # iframe-selectors and iframe-path\r\n  return [\r\n    document.URL,\r\n    document.documentElement.innerHTML,\r\n    getAttribute(document.documentElement.attributes),\r\n    getFramePath(),\r\n    getElementPath(document.documentElement),\r\n    getDoctype(document.doctype),\r\n    linksObj\r\n  ]\r\n\r\n###!\r\n# convert html text of every frame to DOM-Tree\r\n# @param {string} htmlText - string with html code\r\n# @return {HTMLDocument} - created DOM with string\r\n###\r\ngetDocument = (htmlText) ->\r\n  _html = document.createElement 'html'\r\n  html = document.createElement 'html'\r\n  html.innerHTML = htmlText.substring(\r\n    htmlText.indexOf(\"<body\"),\r\n    htmlText.length\r\n  )\r\n  attributesBody = html.getElementsByTagName('body')[0].attributes\r\n  _html.innerHTML = \"<head></head><body></body>\"\r\n  _html.getElementsByTagName('head')[0].innerHTML = htmlText.substring(\r\n    htmlText.indexOf(\"<head\"), htmlText.indexOf(\"/head>\") + 6\r\n  )\r\n  _html.getElementsByTagName('body')[0].innerHTML = htmlText.substring(\r\n    htmlText.indexOf(\"<body\"), htmlText.length\r\n  )\r\n  body = _html.getElementsByTagName('body')[0]\r\n  for attribute in attributesBody\r\n    body.setAttribute attribute.name, attribute.value\r\n  return _html\r\n\r\n###!\r\n# get frame position on background script\r\n# @param {HTMLIframeElement} - iframe that we want find position,\r\n# @param {HTMLDocument} - DOM that are parent of this iframe,\r\n# @return {String} - string with iframe position\r\n# @example [3,0,0]\r\n###\r\ngetFramePosition = (obj, DOM) ->\r\n  result = []\r\n  _getPositionOfFrame = (obj)->\r\n    if obj.parentElement == DOM\r\n      return\r\n    else\r\n      parent = obj.parentElement\r\n      nodeList = Array.prototype.slice.call(parent.children)\r\n      index = nodeList.indexOf(obj)\r\n      result.unshift(index)\r\n      _getPositionOfFrame(parent)\r\n  _getPositionOfFrame(obj)\r\n  return JSON.stringify(result)\r\n\r\n###!\r\n# delete iframe security policy\r\n# @param {HTMLDocument} - DOM object\r\n###\r\ndeleteMeta = (document) ->\r\n  metaElements = document.querySelectorAll('meta[http-equiv]')\r\n  metaElements.forEach (element) ->\r\n    if element.getAttribute('http-equiv') in META_ATTRIBS_FOR_DEL\r\n      element.parentElement?.removeChild(element)\r\n\r\n###!\r\n# delete iframe security policy\r\n# @param {HTMLDocument} - DOM object\r\n###\r\ndeleteSendBoxAttrib = (document) ->\r\n  iframes = document.querySelectorAll('iframe[sendbox]')\r\n  iframes.forEach (iframe) ->\r\n    iframe.removeAttribute('sendbox')\r\n\r\n###!\r\n# add meta tag informing that this page is saved by PageCatch\r\n# @param {HTMLDocument} - DOM of current document,\r\n# @param {String} - string with url of current iframe,\r\n# NOTE: if original-url meta alread exists (with original site url), do\r\n# not create a new one. It means, that we resave already stored page\r\n###\r\naddMeta = (DOM, url)->\r\n  if not DOM.querySelector('meta[name=\"original-url\"]')\r\n    meta = document.createElement 'meta'\r\n    meta.setAttribute 'name','original-url'\r\n    meta.setAttribute 'content', url\r\n    head = (\r\n      DOM.getElementsByTagName('head')[0] ?\r\n      DOM.getElementsByTagName('body')[0]\r\n    )\r\n    head.insertBefore meta, head.children[0]\r\n\r\n###!\r\n# run functions for delete security policy\r\n# @param {HTMLDocument} - DOM of current document\r\n# @param {String} - string with url of current iframe\r\n###\r\ndefaultCleanUp = (document,url) ->\r\n  deleteMeta(document)\r\n  deleteSendBoxAttrib(document)\r\n  addMeta(document,url)\r\n\r\n###!\r\n# take html attributes for save\r\n# @param {array} array - array with attributes of tag <html>...</html>,\r\n# @param {DocumentElement} status - Doctype of document,\r\n# @return {String} - string with html code with all atributes + doctype\r\n# @example \"<! DOCTYPE html> <html lang=\"en\" class=\"is-absent\"><head>...</html>\"\r\n###\r\ngetAttribute = (array, status) ->\r\n  src = \"<html \"\r\n  for i in [0...array.length] by 2\r\n    if array[i+1]?\r\n      src += array[i] + '=\"' + array[i+1] + '\" '\r\n    else\r\n      break\r\n  #console.log status\r\n  if status?\r\n    doctype = getDoctype(status)\r\n    #console.log doctype\r\n    return doctype + src + \">\"\r\n  return src += \">\"\r\n\r\n###!\r\n# take doctype with attributes for save\r\n# @param {array} array - array with attributes of doctype,\r\n# @return {String} - string with doctype of page\r\n# @example \"<!DOCTYPE html>\"\r\n###\r\ngetDoctype = (array) ->\r\n  src = \"<!DOCTYPE \"\r\n  elem = \"\"\r\n  for i in [0...array.length]\r\n    continue if not array[i].trim()\r\n    switch i\r\n      when 0 then src += array[i] + \" \"\r\n      when 1 then src += \"PUBLIC \" + '\"' + array[i] + '\" '\r\n      when 2 then src += '\"' + array[i] + '\"'\r\n    #console.log src\r\n  return src + \">\"\r\n\r\n###!\r\n# save page\r\n# @param {Number} tabID - number of tab which you want to save,\r\n# @param {Function} cleanUp - function with clean any attributes from page,\r\n# @param {Function} done - function in which will be return html text of\r\n#                          saved page\r\n# @example \"<! DOCTYPE html> <html lang=\"en\" class=\"is-absent\"><head>...</html>\"\r\n###\r\ngetPage = (tabID, cleanUp, done) ->\r\n  dictionary = {}\r\n  flag = false\r\n  \r\n  ###!\r\n  # parse tags as img,style,link and parse attribute style in any tags with him\r\n  # @param {Function} callback - function that check completing of save\r\n  ###\r\n  parse = (callback) ->\r\n    metas = dictionary[\"\"]?.document.querySelectorAll '[name]'\r\n    for meta in metas\r\n      if meta.getAttribute('name') == 'original-url'\r\n        flag = true\r\n        callback 0, 0\r\n        return\r\n    attributeCounter = 0\r\n    tagCounter = 0\r\n    for key, dom of dictionary\r\n      tagsStyles = dom.document.querySelectorAll '*[style]'\r\n      for tag in tagsStyles\r\n        attributeCounter++\r\n        inlineCSS tag.getAttribute('style'), tag, dom.url, dom.actualUrls,\r\n          (error, tag, result) ->\r\n            attributeCounter--\r\n            if error?\r\n              console.error \"Style attr error\", error\r\n            else\r\n              tag.setAttribute('style', result)\r\n            callback tagCounter, attributeCounter\r\n      tags = dom.document.querySelectorAll 'img,link,style'\r\n      for tag in tags\r\n        tagCounter++\r\n        if tag.hasAttribute('srcset')\r\n          tag.setAttribute('srcset',\"\")\r\n        if(tag.hasAttribute('src'))\r\n          src = convertURL tag.getAttribute('src'), dom.url\r\n          xhrToBase64 src, tag, (error, tag, result) ->\r\n            tagCounter--\r\n            if error?\r\n              console.error \"(src)Base 64 error:\", error.stack\r\n            else\r\n              tag.setAttribute \"src\", result\r\n            callback tagCounter, attributeCounter\r\n        else if(tag.hasAttribute('href'))\r\n          if(tag.getAttribute('rel') == \"stylesheet\")\r\n            href = convertURL(tag.getAttribute('href'), dom.url)\r\n            #console.log \"INLINECSSS_START\",tag\r\n            inlineCSS getXHR(href), tag, href, dom.actualUrls,\r\n              (error, tag, result) ->\r\n                if error?\r\n                  console.error \"style error\", error\r\n                else\r\n                  tagCounter--\r\n                  console.log 'INLINECSSS_END', tag\r\n                  style = document.createElement 'style'\r\n                  #console.log result1\r\n                  #console.log 'RESULT2', result2\r\n                  style.innerHTML = result\r\n                  parent = tag.parentElement\r\n                  tag.parentElement.insertBefore style, tag\r\n                  tag.parentElement.removeChild tag\r\n                callback tagCounter, attributeCounter\r\n          else\r\n            href = convertURL(tag.getAttribute('href'), dom.url)\r\n            xhrToBase64 href, tag, (error, tag, result) ->\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(href) xhrToBase64 error (href=#{href}):\", \\\r\n                  error.stack\r\n              else\r\n                tag.setAttribute \"href\", result\r\n              callback tagCounter, attributeCounter\r\n        else\r\n          #console.log 'INLINECSSS_START', tag\r\n          inlineCSS tag.innerHTML, tag, dom.url, dom.actualUrls,\r\n            (error, tag, result) ->\r\n              #console.log \"INLINECSSS_END\", tag\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(style)inlineCSS error:\", error.stack\r\n                console.error tag.innerHTML\r\n              else\r\n                tag.innerHTML = result\r\n              callback tagCounter, attributeCounter\r\n    flag = true\r\n  ###!\r\n  # create one object from dictionary of frames\r\n  # @param {Object} obj - obj of dictionary(any frame from page)\r\n  # @param {String} str - string with current index in recursive\r\n  ###\r\n  createNewObj = (obj, str) ->\r\n    frames = obj.document.getElementsByTagName 'iframe'\r\n    for frame in frames\r\n      selector = getFramePosition(frame, obj.document)\r\n      #console.log selector\r\n      index = -1\r\n      for key of obj.framesIdx\r\n        #console.log key\r\n        if selector == key\r\n          index= obj.framesIdx[key]\r\n      if index == -1\r\n        continue\r\n      key = str + index\r\n      if dictionary[key]?\r\n        createNewObj dictionary[key], key+\":\"\r\n        _url = dictionary[key].url\r\n        _document = dictionary[key].document\r\n        defaultCleanUp _document, _url\r\n        cleanUp?(_document, _url)\r\n        source = getAttribute(\r\n          dictionary[key].header,\r\n          dictionary[key].doctype\r\n        ) + _document.innerHTML + \"</html>\"\r\n        frame.setAttribute('srcdoc', source)\r\n\r\n  ###!\r\n  # finish and return string with complete all resourses in one HTML\r\n  # @param {Number} counter - counter of tags\r\n  # @param {Number} counter1 - counter of attributes\r\n  ###\r\n  finalize = (counter, counter1) ->\r\n    #console.log counter, counter1\r\n    if counter == 0 and counter1 == 0 and flag == true\r\n      createNewObj dictionary[\"\"],\"\"\r\n      _url = dictionary[\"\"].url\r\n      _document = dictionary[\"\"].document\r\n      defaultCleanUp _document, _url\r\n      cleanUp?(_document, _url)\r\n      result = getAttribute(\r\n        dictionary[\"\"].header, dictionary[\"\"].doctype\r\n      ) + _document.innerHTML + \"</html>\"\r\n      done?(result)\r\n      dictionary = {}\r\n      flag = false\r\n\r\n\r\n  # START\r\n  chrome.tabs.executeScript tabID,\r\n    code: \"(\" + getSource.toString() + \")()\" # transform function to the\r\n                                             # string and wrap it into the\r\n                                             # closure to execute it\r\n                                             # immidiatelly after\r\n                                             # injecting\r\n    allFrames: true,\r\n    matchAboutBlank: true\r\n  , (arrays) ->\r\n    #console.log arrays\r\n    for dom in arrays\r\n      obj =\r\n        url: dom[0]\r\n        header: dom[2]\r\n        document: getDocument(dom[1])\r\n        framesIdx: dom[4]\r\n        doctype: dom[5]\r\n        actualUrls: dom[6]\r\n      dictionary[dom[3]] = obj\r\n      #console.log dom[6]\r\n    parse(finalize)\r\n\r\nmodule.exports = getPage\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/page-catch.coffee","xhrToBase64 = (url, elem, callback) ->\r\n  if(url.indexOf(\"data:\") >= 0)\r\n    callback null, elem, url\r\n  else\r\n    #console.log \"xhr-to-base64: Url='#{url}'\"\r\n    xhr = new XMLHttpRequest()\r\n    xhr.open 'GET', url, true\r\n    xhr.responseType = 'blob'\r\n    reader = new FileReader()\r\n\r\n    xhr.onload = (e) ->\r\n      #console.log \"xhr-to-base64: XHR LOAD\"\r\n      if this.status != 200\r\n        callback null, elem, \" \", url\r\n      else\r\n        blob = this.response\r\n        reader.onloadend = () ->\r\n          callback null, elem, reader.result, url\r\n        reader.readAsDataURL(blob)\r\n\r\n    xhr.onerror = (e) ->\r\n      console.error \"XHR Error \" + \\\r\n        e.target.status + \\\r\n        \" occurred while receiving the document.\"\r\n      callback e, elem, \" \",url\r\n\r\n    xhr.send()\r\n\r\nmodule.exports = xhrToBase64\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/xhr-to-base64.coffee","module.exports = (url, main) ->\r\n  flag = false\r\n  url = url.replace(/\\s/g, '')\r\n  #console.warn \"URL: \", url\r\n  #console.warn \"MAIN: \", main\r\n  if (\r\n    (url[0] == '\"' and url[url.length - 1] == '\"') or\r\n    (url[0] == \"'\" and url[url.length - 1] == \"'\")\r\n  )\r\n    url= url.substr 1, url.length - 2\r\n\r\n  if url.startsWith('data:')\r\n    #console.log \"DATA\", url\r\n    return url\r\n\r\n  if url.startsWith('//')\r\n    return \"https:\" + url\r\n\r\n  if url.match(/^[\\w\\-_\\d]+:/)\r\n    return url\r\n\r\n  if url[0] == '/' and url[1] != '/'\r\n    flag = true\r\n    mainURLS = main.split('/')\r\n    mainURLS = mainURLS.slice(0, 3)\r\n    main = mainURLS.join('/')\r\n    #console.log main+url\r\n    return main+url\r\n  mainURLS = main.split('/')\r\n  #console.log main\r\n  #console.log mainURLS\r\n  #console.log mainURLS[mainURLS.length-1].indexOf('.')\r\n  if '.' in mainURLS[mainURLS.length-1] and not flag\r\n    mainURLS.pop()\r\n    #console.log(mainURLS)\r\n  indexURLS = url.split('/')\r\n  #console.log(mainURLS)\r\n  #console.log indexURLS\r\n  for indexURL in indexURLS\r\n    if indexURL == '..'\r\n      mainURLS.pop()\r\n    else\r\n      mainURLS.push(indexURL)\r\n  #console.log \"LASTURL\", mainURLS.join('/')\r\n  return mainURLS.join('/')\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/get-relative-link.coffee","module.exports = (url) ->\r\n  try\r\n    #console.log \"xhr: Url ='#{url}'\"\r\n    xhr = new XMLHttpRequest()\r\n    xhr.open 'GET', url, false\r\n    xhr.send()\r\n    if xhr.status ==200\r\n      return xhr.responseText\r\n    else\r\n      return \" \"\r\n  catch e\r\n    console.error \"XHR\", e.stack\r\n    return \" \"\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/xhr.coffee","convertURL = require '../modules/get-relative-link.coffee'\r\nconvertToBase64 = require '../modules/xhr-to-base64.coffee'\r\n\r\n\r\nmodule.exports = (src, dom, source, actualUrls, callback) ->\r\n  flag = false\r\n  if(src.indexOf(\"url(\") < 0)\r\n    callback null, dom, src\r\n  else\r\n    #console.log \"inline-css:\", src, dom\r\n    urlMas = []\r\n    elemMas = []\r\n    convMas = []\r\n    lastIndex = 0\r\n    regExp =  /([\\s\\S]*?url\\()\\s*(['\"]?)([\\s\\S]*?)\\2\\s*(\\))/gmi\r\n    while (obj = regExp.exec(src))?\r\n      elemMas.push obj[1], obj[4]\r\n      urlMas.push convertURL obj[3], source\r\n      lastIndex = regExp.lastIndex\r\n    elemMas.push src[lastIndex..]\r\n    #console.log \"MASIVE\", elemMas\r\n    counter = 0\r\n    for i in [0...urlMas.length]\r\n      if actualUrls[urlMas[i]]\r\n        flag = true\r\n        actualUrls[urlMas[i]]\r\n        counter++\r\n        console.log 'COUNTER++',counter\r\n        convertToBase64 urlMas[i], dom, (error, obj, result, url) ->\r\n          counter--\r\n          console.log counter\r\n          if error?\r\n            console.error \"Error base64:\", error.stack\r\n          else\r\n            actualUrls[url] = result\r\n          if counter == 0\r\n            console.log actualUrls\r\n            src = []\r\n            index = 0\r\n            urlIndex = 0\r\n            while index < elemMas.length\r\n              src.push elemMas[index]\r\n              index++\r\n              if urlMas[urlIndex]?\r\n                if actualUrls[urlMas[urlIndex]]\r\n                  console.log 'URL', actualUrls[urlMas[urlIndex]]\r\n                  src.push '\"'+actualUrls[urlMas[urlIndex]]+'\"'\r\n                else\r\n                  src.push \"\"\r\n              if(elemMas[index]?)\r\n                console.log \"SECOND_ELEM\", elemMas[index]\r\n                src.push(elemMas[index])\r\n              index++\r\n              urlIndex++\r\n            callback null, dom, src.join(\"\")\r\n    if !flag\r\n      callback null, dom, elemMas.join('')\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/inline-css.coffee"],"sourceRoot":""}