{"version":3,"sources":["webpack:///webpack/bootstrap acfca061f34a9024ef61","webpack:///./examples/using-require/chrome/background.coffee","webpack:///./~/file-saver/FileSaver.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/page-catch.coffee","webpack:///./src/modules/xhr-to-base64.coffee","webpack:///./src/modules/get-relative-link.coffee","webpack:///./src/modules/xhr.coffee","webpack:///./src/modules/inline-css.coffee"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;GAAA;;AAAA,aAAY,oBAAQ,CAAR;;AACZ,aAAY,oBAAQ,CAAR;;AAEZ,mBAAkB,CAChB,QADgB,EAEhB,SAFgB,EAGhB,SAHgB,EAIhB,WAJgB,EAKhB,SALgB,EAMhB,cANgB,EAOhB,cAPgB,EAQhB,YARgB;;AAWlB,iBAAgB,SAAC,QAAD;AACd;GAAA,UAAU,QAAQ,CAAC,gBAAT,CAA0B,QAA1B;AACV;;KACE,MAAM,CAAC,aAAa,CAAC,WAArB,CAAiC,MAAjC;AADF;AAEA,UAAO;AAJO;;AAMhB,oBAAmB,SAAC,QAAD;AACjB;GAAA,SAAS,QAAQ,CAAC,gBAAT,CAA0B,wBAA1B;UACT,MAAM,CAAC,OAAP,CAAe,SAAC,KAAD;KACb,IAAmC,KAAK,CAAC,YAAN,CAAmB,OAAnB,CAAnC;cAAA,KAAK,CAAC,YAAN,CAAmB,OAAnB,EAA4B,EAA5B;;GADa,CAAf;AAFiB;;AAKnB,uBAAsB,SAAC,QAAD;AACpB;GAAA,WAAW,QAAQ,CAAC,gBAAT,CACT,MAAG,CAAC,eAAe,CAAC,IAAhB,CAAqB,KAArB,CAAD,CAAH,GAAgC,GADvB;UAGX,QAAQ,CAAC,OAAT,CAAiB,SAAC,OAAD;AACf;AAAA;AAAA;UAAA;;OACE,0BAAG,IAAI,CAAE,aAAN,eAAc,eAAd,YAAH;sBACE,OAAO,CAAC,eAAR,CAAwB,IAAI,CAAC,IAA7B,GADF;QAAA;8BAAA;;AADF;;GADe,CAAjB;AAJoB;;AAStB,WAAU,SAAC,QAAD,EAAW,GAAX;GACR,cAAc,QAAd;GACA,oBAAoB,QAApB;UACA,iBAAiB,QAAjB;AAHQ;;AAMV,QAAO,SAAC,QAAD;AACL;GAAA,OAAW,SAAK,CAAC,QAAD,CAAL,EAAgB,YAAhB,EAA6B;KAAC,MAAM,yBAAP;IAA7B;UACX,SAAS,CAAC,MAAV,CAAiB,IAAjB;AAFK;;AAIP,OAAM,CAAC,aAAa,CAAC,SAAS,CAAC,WAA/B,CAA2C;UACzC,MAAM,CAAC,IAAI,CAAC,KAAZ,CAAkB;KAAC,QAAQ,IAAT;KAAe,eAAe,IAA9B;IAAlB,EAAuD,SAAC,QAAD;YACrD,UAAU,QAAS,GAAE,CAAC,EAAtB,EAAyB,OAAzB,EAAiC,IAAjC;GADqD,CAAvD;AADyC,EAA3C;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA,MAAK,OAAO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA4D;AAC5D,2DAA0D,gBAAgB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAiF,GAAG,yBAAyB;AAC7G;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap acfca061f34a9024ef61","fileSaver = require 'file-saver'\r\npageCatch = require '../../../src/page-catch.coffee'\r\n\r\nONEVENT_ATTRIBS = [\r\n  'onload'\r\n  'onclick'\r\n  'onkeyup'\r\n  'onkeydown'\r\n  'onenter'\r\n  'onmouseenter',\r\n  'onmouseleave'\r\n  'onkeypress'\r\n]\r\n\r\ndeleteScripts = (document) ->\r\n  scripts = document.querySelectorAll 'script'\r\n  for script in scripts\r\n    script.parentElement.removeChild script\r\n  return document\r\n\r\nclearValueAttrib = (document) ->\r\n  inputs = document.querySelectorAll(\"input[type='password']\")\r\n  inputs.forEach (input) ->\r\n    input.setAttribute('value', '') if input.getAttribute('value')\r\n\r\nclearOnEventAttribs = (document) ->\r\n  elements = document.querySelectorAll(\r\n    \"[#{ONEVENT_ATTRIBS.join('],[')}]\"\r\n  )\r\n  elements.forEach (element) ->\r\n    for attr in element.attributes\r\n      if attr?.name in ONEVENT_ATTRIBS\r\n        element.removeAttribute(attr.name)\r\n\r\ncleanUp = (document, url) ->\r\n  deleteScripts(document)\r\n  clearOnEventAttribs(document)\r\n  clearValueAttrib(document)\r\n \r\n\r\nsave = (htmlText) ->\r\n  file = new File([htmlText],\"index.html\",{type: \"text/html;charset=utf-8\"})\r\n  fileSaver.saveAs(file)\r\n\r\nchrome.browserAction.onClicked.addListener () ->\r\n  chrome.tabs.query {active: true, currentWindow: true}, (tabArray) ->\r\n    pageCatch(tabArray[0].id,cleanUp,save)\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./examples/using-require/chrome/background.coffee","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/file-saver/FileSaver.js\n// module id = 1\n// module chunks = 0","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-define.js\n// module id = 2\n// module chunks = 0","module.exports = __webpack_amd_options__;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 3\n// module chunks = 0","xhrToBase64 = require './modules/xhr-to-base64.coffee'\r\nconvertURL = require './modules/get-relative-link.coffee'\r\ngetXHR = require './modules/xhr.coffee'\r\ninlineCSS = require './modules/inline-css.coffee'\r\n\r\n\r\n\r\nMETA_ATTRIBS_FOR_DEL = [\r\n  'Content-Security-Policy'\r\n  'refresh'\r\n]\r\n\r\nclass TreeElementNotFound extends Error\r\n\r\n\r\n#get array with information of every frame\r\ngetSource = () ->\r\n  \r\n  ###!\r\n  # get frame index in page\r\n  # @return {String} - frame index\r\n  # @example 0:3:5\r\n  ###\r\n  getFramePath = () ->\r\n    fid = []\r\n\r\n    ###!\r\n    # add frame-ID into fid[] array (recursive)\r\n    # @param {Window} win - parent's Window object\r\n    ###\r\n    _get_frame_id = (win) ->\r\n      parent = win.parent\r\n      return if win == parent\r\n      idx = '?'\r\n      for frame, frame_idx in parent.frames\r\n        if win == frame\r\n          idx = frame_idx\r\n          break\r\n      fid.unshift idx\r\n      _get_frame_id(parent)\r\n      return\r\n    _get_frame_id(window)\r\n    return fid.join ':'\r\n\r\n  ###!\r\n  # get frame position on content script\r\n  # @param {HTMLDocument} DOM - DOM document object\r\n  # @return {Object} - frames position on current frame\r\n  # @example [3,0,0]: 0\r\n  ###\r\n  getElementPath = (DOM) ->\r\n    dictionary = {}\r\n\r\n    ###!\r\n    # get frameID\r\n    # @param {HTMLIframeElement} obj - iframe document object\r\n    # @return {String} - string with index iframe\r\n    # @example [3,0,0]\r\n    ###\r\n    getFrameId = (obj) ->\r\n      result = []\r\n      _getPositionOfFrame = (obj)->\r\n        if obj.parentElement == DOM\r\n          return\r\n        else\r\n          parent = obj.parentElement\r\n          nodeList = Array.prototype.slice.call(parent.children)\r\n          index = nodeList.indexOf(obj)\r\n          result.unshift(index)\r\n          _getPositionOfFrame(parent)\r\n      _getPositionOfFrame(obj)\r\n      console.log result\r\n      return JSON.stringify(result)\r\n\r\n    frames = DOM.getElementsByTagName 'iframe'\r\n    console.log frames.length\r\n    for iframe in frames\r\n      i = 0\r\n      while i<window.frames.length\r\n        if iframe.contentWindow == window.frames[i]\r\n          console.log getFrameId(iframe, DOM)\r\n          dictionary[getFrameId(iframe, DOM)] = i\r\n          result = []\r\n          break\r\n        i++\r\n    return dictionary\r\n    \r\n  ###!\r\n  #get page doctype with all atributes'\r\n  # @param {DocumentType} doctype - document doctype object\r\n  # @return {array} - array with attributes of doctype page\r\n  # @return null - if doctype is absent\r\n  # @example [\"html\",\"w3c\",\"\"]\r\n  ###\r\n  getDoctype = (doctype)->\r\n    if doctype?\r\n      return [doctype.name, doctype.publicId, doctype.systemId]\r\n    return null\r\n\r\n  ###!\r\n  #get attributes of tag <html ...>...</html>\r\n  # @param {array} array - array with html attributes\r\n  # @return {array} - array with attributes of tag <html>\r\n  # @example [\"lang\",\"en\",\"class\",\"is-copy-enable\"]\r\n  ###\r\n  getAttribute = (array)->\r\n    mas = []\r\n    for elem in array\r\n      mas.push(elem.nodeName, elem.nodeValue)\r\n    return mas\r\n\r\n  # Function returns iframe url, content, html-atributes,\r\n  # iframe-selectors and iframe-path\r\n  return [\r\n    document.URL,\r\n    document.documentElement.innerHTML,\r\n    getAttribute(document.documentElement.attributes),\r\n    getFramePath(),\r\n    getElementPath(document.documentElement),\r\n    getDoctype(document.doctype)\r\n  ]\r\n\r\n###!\r\n#convert html text of every frame to DOM-Tree\r\n# @param {string} htmlText - string with html code\r\n# @return {HTMLDocument} - created DOM with string\r\n###\r\ngetDocument = (htmlText) ->\r\n  _html = document.createElement 'html'\r\n  html = document.createElement 'html'\r\n  html.innerHTML = htmlText.substring(\r\n    htmlText.indexOf(\"<body\"),\r\n    htmlText.length\r\n  )\r\n  attributesBody = html.getElementsByTagName('body')[0].attributes\r\n  _html.innerHTML = \"<head></head><body></body>\"\r\n  _html.getElementsByTagName('head')[0].innerHTML = htmlText.substring(\r\n    htmlText.indexOf(\"<head\"), htmlText.indexOf(\"/head>\") + 6\r\n  )\r\n  _html.getElementsByTagName('body')[0].innerHTML = htmlText.substring(\r\n    htmlText.indexOf(\"<body\"), htmlText.length\r\n  )\r\n  body = _html.getElementsByTagName('body')[0]\r\n  for attribute in attributesBody\r\n    body.setAttribute attribute.name, attribute.value\r\n  return _html\r\n\r\n###!\r\n#get frame position on background script\r\n# @param {HTMLIframeElement} - iframe that we want find position,\r\n# @param {HTMLDocument} - DOM that are parent of this iframe,\r\n# @return {String} - string with iframe position\r\n# @example [3,0,0]\r\n###\r\ngetFramePosition = (obj, DOM) ->\r\n  result = []\r\n  _getPositionOfFrame = (obj)->\r\n    if obj.parentElement == DOM\r\n      return\r\n    else\r\n      parent = obj.parentElement\r\n      nodeList = Array.prototype.slice.call(parent.children)\r\n      index = nodeList.indexOf(obj)\r\n      result.unshift(index)\r\n      _getPositionOfFrame(parent)\r\n  _getPositionOfFrame(obj)\r\n  return JSON.stringify(result)\r\n\r\n###!\r\n#delete iframe security policy\r\n# @param {HTMLDocument} - DOM object\r\n###\r\ndeleteMeta = (document) ->\r\n  metaElements = document.querySelectorAll('meta[http-equiv]')\r\n  metaElements.forEach (element) ->\r\n    if element.getAttribute('http-equiv') in META_ATTRIBS_FOR_DEL\r\n      element.parentElement?.removeChild(element)\r\n\r\n###!\r\n#delete iframe security policy\r\n# @param {HTMLDocument} - DOM object\r\n###\r\ndeleteSendBoxAttrib = (document) ->\r\n  iframes = document.querySelectorAll('iframe[sendbox]')\r\n  iframes.forEach (iframe) ->\r\n    iframe.removeAttribute('sendbox')\r\n\r\n###!\r\n#add tag meta, that this page is saved by PageCatch\r\n# @param {HTMLDocument} - DOM of current document,\r\n# @param {String} - string with url of current iframe,\r\n###\r\naddMeta = (DOM, url)->\r\n  meta = document.createElement 'meta'\r\n  meta.setAttribute 'name','original-url'\r\n  meta.setAttribute 'content', url\r\n  head = (\r\n    DOM.getElementsByTagName('head')[0] ?\r\n    DOM.getElementsByTagName('body')[0]\r\n  )\r\n  head.insertBefore meta, head.children[0]\r\n\r\n###!\r\n# run functions for delete security policy\r\n# @param {HTMLDocument} - DOM of current document\r\n# @param {String} - string with url of current iframe\r\n###\r\ndefaultCleanUp = (document,url) ->\r\n  deleteMeta(document)\r\n  deleteSendBoxAttrib(document)\r\n  addMeta(document,url)\r\n\r\n###!\r\n#take html attributes for save\r\n# @param {array} array - array with attributes of tag <html>...</html>,\r\n# @param {DocumentElement} status - Doctype of document,\r\n# @return {String} - string with html code with all atributes + doctype\r\n# @example \"<! DOCTYPE html> <html lang=\"en\" class=\"is-absent\"><head>...</html>\"\r\n###\r\ngetAttribute = (array, status) ->\r\n  src = \"<html \"\r\n  for i in [0...array.length] by 2\r\n    if array[i+1]?\r\n      src += array[i] + '=\"' + array[i+1] + '\" '\r\n    else\r\n      break\r\n  #console.log status\r\n  if status?\r\n    doctype = getDoctype(status)\r\n    #console.log doctype\r\n    return doctype + src + \">\"\r\n  return src += \">\"\r\n\r\n###!\r\n#take doctype with attributes for save\r\n# @param {array} array - array with attributes of doctype,\r\n# @return {String} - string with doctype of page\r\n# @example \"<!DOCTYPE html>\"\r\n###\r\ngetDoctype = (array) ->\r\n  src = \"<!DOCTYPE \"\r\n  elem = \"\"\r\n  for i in [0...array.length]\r\n    continue if not array[i].trim()\r\n    switch i\r\n      when 0 then src += array[i] + \" \"\r\n      when 1 then src += \"PUBLIC \" + '\"' + array[i] + '\" '\r\n      when 2 then src += '\"' + array[i] + '\"'\r\n    #console.log src\r\n  return src + \">\"\r\n\r\n###!\r\n#save page\r\n# @param {Number} tabID - number of tab which you want to save,\r\n# @param {Function} cleanUp - function with clean any attributes from page,\r\n# @param {Function} done - function in which will be return html text of saved page\r\n# @example \"<! DOCTYPE html> <html lang=\"en\" class=\"is-absent\"><head>...</html>\"\r\n###\r\ngetPage = (tabID, cleanUp, done) ->\r\n  dictionary = {}\r\n  flag = false\r\n  \r\n  ###!\r\n  # parse tags as img,style,link and parse attribute style in any tags with him\r\n  # @param {Function} callback - function that check completing of save\r\n  ###\r\n  parse = (callback) ->\r\n    metas = dictionary[\"\"]?.document.querySelectorAll '[name]'\r\n    for meta in metas\r\n      if meta.getAttribute('name') == 'original-url'\r\n        flag = true\r\n        callback 0, 0\r\n        return\r\n    attributeCounter = 0\r\n    tagCounter = 0\r\n    for key, dom of dictionary\r\n      tagsStyles = dom.document.querySelectorAll '*[style]'\r\n      for tag in tagsStyles\r\n        attributeCounter++\r\n        inlineCSS tag.getAttribute('style'), tag, dom.url,\r\n          (error, tag, result) ->\r\n            attributeCounter--\r\n            if error?\r\n              console.error \"Style attr error\", error\r\n            else\r\n              tag.setAttribute('style', result)\r\n            callback tagCounter, attributeCounter\r\n      tags = dom.document.querySelectorAll 'img,link,style'\r\n      for tag in tags\r\n        tagCounter++\r\n        if(tag.hasAttribute('src'))\r\n          src = convertURL tag.getAttribute('src'), dom.url\r\n          xhrToBase64 src, tag, (error, tag, result) ->\r\n            tagCounter--\r\n            if error?\r\n              console.error \"(src)Base 64 error:\", error.stack\r\n            else\r\n              tag.setAttribute \"src\", result\r\n            callback tagCounter, attributeCounter\r\n        else if(tag.hasAttribute('href'))\r\n          if(tag.getAttribute('rel') == \"stylesheet\")\r\n            href = convertURL(tag.getAttribute('href'), dom.url)\r\n            inlineCSS getXHR(href), tag, href, (error, tag, result) ->\r\n              if error?\r\n                console.error \"style error\", error\r\n              else\r\n                tagCounter--\r\n                style = document.createElement 'style'\r\n                style.innerHTML = result\r\n                parent = tag.parentElement\r\n                tag.parentElement.insertBefore style, tag\r\n                tag.parentElement.removeChild tag\r\n              callback tagCounter, attributeCounter\r\n          else\r\n            href = convertURL(tag.getAttribute('href'), dom.url)\r\n            xhrToBase64 href, tag, (error, tag, result) ->\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(href) xhrToBase64 error (href=#{href}):\", error.stack\r\n              else\r\n                tag.setAttribute \"href\", result\r\n              callback tagCounter, attributeCounter\r\n        else\r\n          inlineCSS tag.innerHTML, tag, dom.url, (error, tag, result) ->\r\n            tagCounter--\r\n            if error?\r\n              console.error \"(style)inlineCSS error:\", error.stack\r\n              console.error tag.innerHTML\r\n            else\r\n              tag.innerHTML = result\r\n            callback tagCounter, attributeCounter\r\n    flag = true\r\n  ###!\r\n  # create one object from dictionary of frames\r\n  # @param {Object} obj - obj of dictionary(any frame from page)\r\n  # @param {String} str - string with current index in recursive\r\n  ###\r\n  createNewObj = (obj, str) ->\r\n    frames = obj.document.getElementsByTagName 'iframe'\r\n    for frame in frames\r\n      selector = getFramePosition(frame, obj.document)\r\n      #console.log selector\r\n      index = -1\r\n      for key of obj.framesIdx\r\n        #console.log key\r\n        if selector == key\r\n          index= obj.framesIdx[key]\r\n      if index == -1\r\n        continue\r\n      key = str + index\r\n      if dictionary[key]?\r\n        createNewObj dictionary[key], key+\":\"\r\n        _url = dictionary[key].url\r\n        _document = dictionary[key].document\r\n        defaultCleanUp _document, _url\r\n        cleanUp?(_document, _url)\r\n        source = getAttribute(\r\n          dictionary[key].header,\r\n          dictionary[key].doctype\r\n        ) + _document.innerHTML + \"</html>\"\r\n        frame.setAttribute('srcdoc', source)\r\n\r\n  ###!\r\n  # finish and return string with complete all resourses in one HTML\r\n  # @param {Number} counter - counter of tags\r\n  # @param {Number} counter1 - counter of attributes\r\n  ###\r\n  finalize = (counter, counter1) ->\r\n    if counter == 0 and counter1 == 0 and flag == true\r\n      createNewObj dictionary[\"\"],\"\"\r\n      _url = dictionary[\"\"].url\r\n      _document = dictionary[\"\"].document\r\n      defaultCleanUp _document, _url\r\n      cleanUp?(_document, _url)\r\n      result = getAttribute(\r\n        dictionary[\"\"].header, dictionary[\"\"].doctype\r\n      ) + _document.innerHTML + \"</html>\"\r\n      done?(result)\r\n      dictionary = {}\r\n      flag = false\r\n\r\n\r\n  #START\r\n  chrome.tabs.executeScript tabID,\r\n    code: \"(\" + getSource.toString() + \")()\" # transform function to the\r\n                                             # string and wrap it into the\r\n                                             # closure to execute it\r\n                                             # immidiatelly after\r\n                                             # injecting\r\n    allFrames: true,\r\n    matchAboutBlank: true\r\n  , (arrays) ->\r\n    for dom in arrays\r\n      obj =\r\n        url: dom[0]\r\n        header: dom[2]\r\n        document: getDocument(dom[1])\r\n        framesIdx: dom[4]\r\n        doctype: dom[5]\r\n      dictionary[dom[3]] = obj\r\n    parse(finalize)\r\n\r\nmodule.exports = getPage\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/page-catch.coffee","xhrToBase64 = (url, elem, callback) ->\r\n  if(url.indexOf(\"data:\") >= 0)\r\n    callback null, elem, url\r\n  else\r\n    #console.log \"Url: #{url}\"\r\n    xhr = new XMLHttpRequest()\r\n    xhr.open 'GET', url, true\r\n    xhr.responseType = 'blob'\r\n    reader = new FileReader()\r\n    xhr.onload = (e) ->\r\n      #console.log \"XHR LOAD\"\r\n      if this.status != 200\r\n        callback null, elem, \" \", url\r\n      else\r\n        blob = this.response\r\n        reader.onloadend = () ->\r\n          callback null, elem, reader.result, url\r\n        reader.readAsDataURL(blob)\r\n    xhr.onerror = (e) ->\r\n      console.log(\r\n        \"XHR Error \" +\r\n        e.target.status +\r\n        \" occurred while receiving the document.\"\r\n      )\r\n      callback e, elem, url,url\r\n    xhr.send()\r\n\r\nmodule.exports = xhrToBase64\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/xhr-to-base64.coffee","\r\ntakeMain = (main, counter, flag) ->\r\n  if flag == true\r\n    url = document.createElement('a')\r\n    url.href = main\r\n    return url.protocol + \"//\" + url.hostname\r\n  i = main.length\r\n  while main[i] != \"/\" then i--\r\n  main = main.substr 0, i\r\n  i = main.length\r\n  while counter != 0\r\n    counter-- if main[i] == \"/\"\r\n    i--\r\n  main = main.substr 0, i + 1\r\n  return main\r\n\r\n\r\ntakeUrl = (url) ->\r\n  i = 0\r\n  counter = 0\r\n  while url.indexOf(\"..\", i) != -1 and url.indexOf(\"./\", i) != -1\r\n    if url.indexOf(\"..\", i) == -1\r\n      i = url.indexOf(\"./\", i) + 2\r\n    else\r\n      counter++\r\n      i = url.indexOf(\"..\", i) + 3\r\n  if counter == 0 and url[0] == \"/\"\r\n    url = url.substr 1\r\n    return [url, counter, true]\r\n  if i != 0\r\n    url = url.substr i\r\n  return [url, counter, false]\r\n\r\n\r\ngetEnd = (main) ->\r\n  i = main.length - 1\r\n  result = \"\"\r\n  while main[i] != \"/\"\r\n    result = main[i] + result\r\n    i--\r\n  return result\r\n\r\n\r\nmodule.exports = (url, main) ->\r\n  url = url.replace(/\\s/g, '')\r\n  #console.warn \"URL: \",url\r\n  #console.warn \"MAIN: \",main\r\n  if (\r\n    (url[0] == '\"' and url[url.length - 1] == '\"') or\r\n    (url[0] == \"'\" and url[url.length - 1] == \"'\")\r\n  )\r\n    url= url.substr 1, url.length - 2\r\n\r\n  if url[0] == \"/\" and url[1] == \"/\"\r\n    return \"https:\" + url\r\n\r\n  if url.match(/^[\\w\\-_\\d]+:/)\r\n    return url\r\n\r\n  URI = takeUrl(url)\r\n  url = URI[0]\r\n  if URI[2] == true\r\n    return takeMain(main, URI[1], URI[2]) + \"/\" + url\r\n  else\r\n    return takeMain(main, URI[1], URI[2]) + \"/\" + url\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/get-relative-link.coffee","module.exports = (source) ->\r\n\r\n  try\r\n    #console.log \"Url: #{source}\"\r\n    xhr = new XMLHttpRequest()\r\n    xhr.open 'GET', source, false\r\n    xhr.send()\r\n    if xhr.status ==200\r\n      return xhr.responseText\r\n    else\r\n      return \" \"\r\n  catch e\r\n    console.error \"XHR\", e.stack\r\n    return \" \"\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/xhr.coffee","convertURL = require '../modules/get-relative-link.coffee'\r\nconvertToBase64 = require '../modules/xhr-to-base64.coffee'\r\n\r\n\r\nmodule.exports = (src, dom, source, callback) ->\r\n  if(src.indexOf(\"url(\") < 0)\r\n    callback null, dom, src\r\n  else\r\n    #console.log \"HALLOW\", src, dom\r\n    urlMas = []\r\n    elemMas = []\r\n    convMas = []\r\n    i = 0\r\n    while i < src.length\r\n      k = src.indexOf \"url(\", i\r\n      if k!= -1\r\n        elemMas.push src.substring(i, k+4)\r\n        j = src.indexOf \")\", k+1\r\n        urlMas.push convertURL(src.substring(k+4, j), source)\r\n        i = j\r\n      else\r\n        elemMas.push src.substring(i, src.length)\r\n        break\r\n    counter = urlMas.length\r\n    for i in [0...urlMas.length]\r\n      convertToBase64 urlMas[i], dom, (error, obj, result, url) ->\r\n        counter--\r\n        if error?\r\n          console.log \"Error base64:\", error.stack\r\n        else\r\n          convMas.push([url, result])\r\n\r\n        if counter == 0\r\n          src = \"\"\r\n          i = 0\r\n          for elem in elemMas\r\n            src += elem\r\n            if urlMas[i]?\r\n              j = -1\r\n              for conv, index in convMas\r\n                if conv[0] == urlMas[i]\r\n                  j = index\r\n                  break\r\n              if j >= 0\r\n                src += convMas[j][1]\r\n              i++\r\n          callback null, dom, src\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/inline-css.coffee"],"sourceRoot":""}