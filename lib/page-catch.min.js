!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var n,o,u,l,i,a,c,s,f,d,h,m,g,p,y,b,v=function(e,t){function r(){this.constructor=e}for(var n in t)x.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},x={}.hasOwnProperty,E=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};b=r(1),l=r(2),p=r(3),y=r(4),n=["Content-Security-Policy","refresh"],o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return v(t,e),t}(Error),g=function(){/*!
	   * get frame index in page
	   * @return {String} - frame index
	   * @example 0:3:5
	   */
var e,t,r,n;/*!
	   * get frame position on content script
	   * @param {HTMLDocument} DOM - DOM document object
	   * @return {Object} - frames position on current frame
	   * @example [3,0,0]: 0
	   */
/*!
	  #get page doctype with all atributes'
	   * @param {DocumentType} doctype - document doctype object
	   * @return {array} - array with attributes of doctype page
	   * @return null - if doctype is absent
	   * @example ["html","w3c",""]
	   */
/*!
	  #get attributes of tag <html ...>...</html>
	   * @param {array} array - array with html attributes
	   * @return {array} - array with attributes of tag <html>
	   * @example ["lang","en","class","is-copy-enable"]
	   */
return n=function(){var e,t;/*!
	     * add frame-ID into fid[] array (recursive)
	     * @param {Window} win - parent's Window object
	     */
return t=[],e=function(r){var n,o,u,l,i,a,c;if(a=r.parent,r!==a){for(u="?",c=a.frames,o=l=0,i=c.length;l<i;o=++l)if(n=c[o],r===n){u=o;break}t.unshift(u),e(a)}},e(window),t.join(":")},r=function(e){var t,r,n,o,u,l,i,a;for(t={},/*!
	     * get frameID
	     * @param {HTMLIframeElement} obj - iframe document object
	     * @return {String} - string with index iframe
	     * @example [3,0,0]
	     */
n=function(t){var r,n;return n=[],r=function(t){var o,u,l;if(t.parentElement!==e)return l=t.parentElement,u=Array.prototype.slice.call(l.children),o=u.indexOf(t),n.unshift(o),r(l)},r(t),console.log(n),JSON.stringify(n)},r=e.getElementsByTagName("iframe"),console.log(r.length),l=0,i=r.length;l<i;l++)for(u=r[l],o=0;o<window.frames.length;){if(u.contentWindow===window.frames[o]){console.log(n(u,e)),t[n(u,e)]=o,a=[];break}o++}return t},t=function(e){return null!=e?[e.name,e.publicId,e.systemId]:null},e=function(e){var t,r,n,o;for(o=[],r=0,n=e.length;r<n;r++)t=e[r],o.push(t.nodeName,t.nodeValue);return o},[document.URL,document.documentElement.innerHTML,e(document.documentElement.attributes),n(),r(document.documentElement),t(document.doctype)]},/*!
	#convert html text of every frame to DOM-Tree
	 * @param {string} htmlText - string with html code
	 * @return {HTMLDocument} - created DOM with string
	 */
d=function(e){var t,r,n,o,u,l,i;for(t=document.createElement("html"),u=document.createElement("html"),u.innerHTML=e.substring(e.indexOf("<body"),e.length),n=u.getElementsByTagName("body")[0].attributes,t.innerHTML="<head></head><body></body>",t.getElementsByTagName("head")[0].innerHTML=e.substring(e.indexOf("<head"),e.indexOf("/head>")+6),t.getElementsByTagName("body")[0].innerHTML=e.substring(e.indexOf("<body"),e.length),o=t.getElementsByTagName("body")[0],l=0,i=n.length;l<i;l++)r=n[l],o.setAttribute(r.name,r.value);return t},/*!
	#get frame position on background script
	 * @param {HTMLIframeElement} - iframe that we want find position,
	 * @param {HTMLDocument} - DOM that are parent of this iframe,
	 * @return {String} - string with iframe position
	 * @example [3,0,0]
	 */
h=function(e,t){var r,n;return n=[],r=function(e){var o,u,l;if(e.parentElement!==t)return l=e.parentElement,u=Array.prototype.slice.call(l.children),o=u.indexOf(e),n.unshift(o),r(l)},r(e),JSON.stringify(n)},/*!
	#delete iframe security policy
	 * @param {HTMLDocument} - DOM object
	 */
a=function(e){var t;return t=e.querySelectorAll("meta[http-equiv]"),t.forEach(function(e){var t,r;if(t=e.getAttribute("http-equiv"),E.call(n,t)>=0)return null!=(r=e.parentElement)?r.removeChild(e):void 0})},/*!
	#delete iframe security policy
	 * @param {HTMLDocument} - DOM object
	 */
c=function(e){var t;return t=e.querySelectorAll("iframe[sendbox]"),t.forEach(function(e){return e.removeAttribute("sendbox")})},/*!
	#add tag meta, that this page is saved by PageCatch
	 * @param {HTMLDocument} - DOM of current document,
	 * @param {String} - string with url of current iframe,
	 */
u=function(e,t){var r,n,o;return n=document.createElement("meta"),n.setAttribute("name","original-url"),n.setAttribute("content",t),r=null!=(o=e.getElementsByTagName("head")[0])?o:e.getElementsByTagName("body")[0],r.insertBefore(n,r.children[0])},/*!
	 * run functions for delete security policy
	 * @param {HTMLDocument} - DOM of current document
	 * @param {String} - string with url of current iframe
	 */
i=function(e,t){return a(e),c(e),u(e,t)},/*!
	#take html attributes for save
	 * @param {array} array - array with attributes of tag <html>...</html>,
	 * @param {DocumentElement} status - Doctype of document,
	 * @return {String} - string with html code with all atributes + doctype
	 * @example "<! DOCTYPE html> <html lang="en" class="is-absent"><head>...</html>"
	 */
s=function(e,t){var r,n,o,u,l;for(l="<html ",n=o=0,u=e.length;o<u&&null!=e[n+1];n=o+=2)l+=e[n]+'="'+e[n+1]+'" ';return null!=t?(r=f(t),r+l+">"):l+=">"},/*!
	#take doctype with attributes for save
	 * @param {array} array - array with attributes of doctype,
	 * @return {String} - string with doctype of page
	 * @example "<!DOCTYPE html>"
	 */
f=function(e){var t,r,n,o,u;for(u="<!DOCTYPE ",t="",r=n=0,o=e.length;0<=o?n<o:n>o;r=0<=o?++n:--n)if(e[r].trim())switch(r){case 0:u+=e[r]+" ";break;case 1:u+='PUBLIC "'+e[r]+'" ';break;case 2:u+='"'+e[r]+'"'}return u+">"},/*!
	#save page
	 * @param {Number} tabID - number of tab which you want to save,
	 * @param {Function} cleanUp - function with clean any attributes from page,
	 * @param {Function} done - function in which will be return html text of saved page
	 * @example "<! DOCTYPE html> <html lang="en" class="is-absent"><head>...</html>"
	 */
m=function(e,t,r){var n,o,u,a,c;/*!
	   * parse tags as img,style,link and parse attribute style in any tags with him
	   * @param {Function} callback - function that check completing of save
	   */
/*!
	   * create one object from dictionary of frames
	   * @param {Object} obj - obj of dictionary(any frame from page)
	   * @param {String} str - string with current index in recursive
	   */
/*!
	   * finish and return string with complete all resourses in one HTML
	   * @param {Number} counter - counter of tags
	   * @param {Number} counter1 - counter of attributes
	   */
return o={},a=!1,c=function(e){var t,r,n,u,i,c,s,f,d,h,m,g,v,x,E,A,T,O;for(g=null!=(v=o[""])?v.document.querySelectorAll("[name]"):void 0,u=0,f=g.length;u<f;u++)if(m=g[u],"original-url"===m.getAttribute("name"))return a=!0,void e(0,0);t=0,A=0;for(c in o){for(r=o[c],O=r.document.querySelectorAll("*[style]"),i=0,d=O.length;i<d;i++)E=O[i],t++,y(E.getAttribute("style"),E,r.url,function(r,n,o){return t--,null!=r?console.error("Style attr error",r):n.setAttribute("style",o),e(A,t)});for(T=r.document.querySelectorAll("img,link,style"),s=0,h=T.length;s<h;s++)E=T[s],A++,E.hasAttribute("src")?(x=l(E.getAttribute("src"),r.url),b(x,E,function(r,n,o){return A--,null!=r?console.error("(src)Base 64 error:",r.stack):n.setAttribute("src",o),e(A,t)})):E.hasAttribute("href")?"stylesheet"===E.getAttribute("rel")?(n=l(E.getAttribute("href"),r.url),y(p(n),E,n,function(r,n,o){var u,l;return null!=r?console.error("style error",r):(A--,l=document.createElement("style"),l.innerHTML=o,u=n.parentElement,n.parentElement.insertBefore(l,n),n.parentElement.removeChild(n)),e(A,t)})):(n=l(E.getAttribute("href"),r.url),b(n,E,function(r,o,u){return A--,null!=r?console.error("(href) xhrToBase64 error (href="+n+"):",r.stack):o.setAttribute("href",u),e(A,t)})):y(E.innerHTML,E,r.url,function(r,n,o){return A--,null!=r?(console.error("(style)inlineCSS error:",r.stack),console.error(n.innerHTML)):n.innerHTML=o,e(A,t)})}return a=!0},n=function(e,r){var u,l,a,c,f,d,m,g,p,y,b;for(c=e.document.getElementsByTagName("iframe"),p=[],d=0,g=c.length;d<g;d++){a=c[d],y=h(a,e.document),f=-1;for(m in e.framesIdx)y===m&&(f=e.framesIdx[m]);f!==-1&&(m=r+f,null!=o[m]?(n(o[m],m+":"),l=o[m].url,u=o[m].document,i(u,l),"function"==typeof t&&t(u,l),b=s(o[m].header,o[m].doctype)+u.innerHTML+"</html>",p.push(a.setAttribute("srcdoc",b))):p.push(void 0))}return p},u=function(e,u){var l,c,f;if(0===e&&0===u&&a===!0)return n(o[""],""),c=o[""].url,l=o[""].document,i(l,c),"function"==typeof t&&t(l,c),f=s(o[""].header,o[""].doctype)+l.innerHTML+"</html>","function"==typeof r&&r(f),o={},a=!1},chrome.tabs.executeScript(e,{code:"("+g.toString()+")()",allFrames:!0,matchAboutBlank:!0},function(e){var t,r,n,l;for(r=0,n=e.length;r<n;r++)t=e[r],l={url:t[0],header:t[2],document:d(t[1]),framesIdx:t[4],doctype:t[5]},o[t[3]]=l;return c(u)})},e.exports=m},function(e,t){var r;r=function(e,t,r){var n,o;return e.indexOf("data:")>=0?r(null,t,e):(o=new XMLHttpRequest,o.open("GET",e,!0),o.responseType="blob",n=new FileReader,o.onload=function(o){var u;return 200!==this.status?r(null,t," ",e):(u=this.response,n.onloadend=function(){return r(null,t,n.result,e)},n.readAsDataURL(u))},o.onerror=function(n){return console.log("XHR Error "+n.target.status+" occurred while receiving the document."),r(n,t,e,e)},o.send())},e.exports=r},function(e,t){var r,n,o;n=function(e,t,r){var n,o;if(r===!0)return o=document.createElement("a"),o.href=e,o.protocol+"//"+o.hostname;for(n=e.length;"/"!==e[n];)n--;for(e=e.substr(0,n),n=e.length;0!==t;)"/"===e[n]&&t--,n--;return e=e.substr(0,n+1)},o=function(e){var t,r;for(r=0,t=0;e.indexOf("..",r)!==-1&&e.indexOf("./",r)!==-1;)e.indexOf("..",r)===-1?r=e.indexOf("./",r)+2:(t++,r=e.indexOf("..",r)+3);return 0===t&&"/"===e[0]?(e=e.substr(1),[e,t,!0]):(0!==r&&(e=e.substr(r)),[e,t,!1])},r=function(e){var t,r;for(t=e.length-1,r="";"/"!==e[t];)r=e[t]+r,t--;return r},e.exports=function(e,t){var r;return e=e.replace(/\s/g,""),('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])&&(e=e.substr(1,e.length-2)),"/"===e[0]&&"/"===e[1]?"https:"+e:e.match(/^[\w\-_\d]+:/)?e:(r=o(e),e=r[0],r[2]===!0?n(t,r[1],r[2])+"/"+e:n(t,r[1],r[2])+"/"+e)}},function(e,t){e.exports=function(e){var t,r;try{return r=new XMLHttpRequest,r.open("GET",e,!1),r.send(),200===r.status?r.responseText:" "}catch(e){return t=e,console.error("XHR",t.stack)," "}}},function(e,t,r){var n,o;o=r(2),n=r(1),e.exports=function(e,t,r,u){var l,i,a,c,s,f,d,h,m,g;if(e.indexOf("url(")<0)return u(null,t,e);for(g=[],a=[],l=[],c=0;c<e.length;){if(f=e.indexOf("url(",c),f===-1){a.push(e.substring(c,e.length));break}a.push(e.substring(c,f+4)),s=e.indexOf(")",f+1),g.push(o(e.substring(f+4,s),r)),c=s}for(i=g.length,m=[],c=d=0,h=g.length;0<=h?d<h:d>h;c=0<=h?++d:--d)m.push(n(g[c],t,function(r,n,o,f){var d,h,m,p,y,b,v;if(i--,null!=r?console.log("Error base64:",r.stack):l.push([f,o]),0===i){for(e="",c=0,b=0,p=a.length;b<p;b++)if(h=a[b],e+=h,null!=g[c]){for(s=-1,m=v=0,y=l.length;v<y;m=++v)if(d=l[m],d[0]===g[c]){s=m;break}s>=0&&(e+=l[s][1]),c++}return u(null,t,e)}}));return m}}]);
//# sourceMappingURL=page-catch.min.js.map