{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///page-catch.min.js","webpack:///webpack/bootstrap 278cbffcc216239019c4","webpack:///./src/page-catch.coffee","webpack:///./src/modules/xhr-to-base64.coffee","webpack:///./src/modules/get-relative-link.coffee","webpack:///./src/modules/xhr.coffee","webpack:///./src/modules/inline-css.coffee"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","META_ATTRIBS_FOR_DEL","TreeElementNotFound","addMeta","badLinksRel","convertURL","createSelector","defaultCleanUp","deleteElemsFromHead","deleteIframesFromHead","deleteMeta","deleteSendBoxAttrib","getAttribute","getDoctype","getDocument","getFramePosition","getPage","getSource","getXHR","inlineCSS","xhrToBase64","extend","child","parent","ctor","constructor","key","hasProp","prototype","__super__","hasOwnProperty","indexOf","item","i","l","length","superClass","apply","arguments","Error","getCssRulesForTagStyle","getElementPath","getFramePath","getUrlMas","linksObj","passOnTree","stylesheetsArray","obj","j","len","ref","selector","nodeName","parentElement","children","unshift","join","stylesheets","k","len1","rule","str","style","rules","cssText","push","ownerNode","console","log","document","styleSheets","styleObj","elem","endIndex","results","startIndex","results1","substring","startsWith","assert","window","getComputedStyle","body","_get_frame_id","fid","win","frame","frame_idx","idx","frames","DOM","dictionary","getFrameId","iframe","result","_getPositionOfFrame","index","nodeList","Array","slice","JSON","stringify","getElementsByTagName","contentWindow","doctype","name","publicId","systemId","array","mas","nodeValue","URL","location","protocol","documentElement","innerHTML","attributes","head","querySelectorAll","removeChild","htmlText","url","_html","attribute","attributesBody","attributesHead","bodyRE","headRE","htmlObject","regExp","tempDoc","implementation","createHTMLDocument","exec","createElement","setAttribute","value","metaElements","forEach","element","ref1","iframes","removeAttribute","meta","querySelector","insertBefore","status","src","trim","elems","tabID","cleanUp","done","createNewObj","finalize","flag","parse","callback","_style","attributeCounter","dom","faviconLinks","href","iconCounter","iconFlag","len2","len3","len4","len5","link","links","metas","n","o","ref2","ref3","ref4","ref5","rel","styleTags","tag","tagCounter","tags","tagsStyles","urlMas","split","error","stack","appendChild","type","hasAttribute","len6","_document","_url","source","framesIdx","header","counter","counter1","counter2","chrome","tabs","executeScript","code","toString","allFrames","matchAboutBlank","arrays","actualUrls","reader","xhr","XMLHttpRequest","open","responseType","FileReader","onload","e","blob","response","onloadend","readAsDataURL","onerror","target","send","main","indexURL","indexURLS","mainURLS","substr","replace","match","pop","responseText","addNewActualUrls","convertToBase64","getCounter","re","re1","convMas","elemMas","lastIndex","temp","urlIndex"],"mappings":"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","file":"page-catch.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"page-catch\"] = factory();\n\telse\n\t\troot[\"page-catch\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"page-catch\"] = factory();\n\telse\n\t\troot[\"page-catch\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar META_ATTRIBS_FOR_DEL, TreeElementNotFound, addMeta, badLinksRel, convertURL, createSelector, defaultCleanUp, deleteElemsFromHead, deleteIframesFromHead, deleteMeta, deleteSendBoxAttrib, getAttribute, getDoctype, getDocument, getFramePosition, getPage, getSource, getXHR, inlineCSS, xhrToBase64,\n\t  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n\t  hasProp = {}.hasOwnProperty,\n\t  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\t\n\txhrToBase64 = __webpack_require__(1);\n\t\n\tconvertURL = __webpack_require__(2);\n\t\n\tgetXHR = __webpack_require__(3);\n\t\n\tinlineCSS = __webpack_require__(4);\n\t\n\tbadLinksRel = ['dns-prefetch', 'canonical', 'publisher', 'prefetch', ' alternate', 'bb:rum'];\n\t\n\tMETA_ATTRIBS_FOR_DEL = ['Content-Security-Policy', 'refresh'];\n\t\n\tTreeElementNotFound = (function(superClass) {\n\t  extend(TreeElementNotFound, superClass);\n\t\n\t  function TreeElementNotFound() {\n\t    return TreeElementNotFound.__super__.constructor.apply(this, arguments);\n\t  }\n\t\n\t  return TreeElementNotFound;\n\t\n\t})(Error);\n\t\n\tgetSource = function() {\n\t  var createSelector, getAttribute, getCssRulesForTagStyle, getDoctype, getElementPath, getFramePath, getUrlMas, linksObj, passOnTree, stylesheetsArray;\n\t  linksObj = {};\n\t  stylesheetsArray = [];\n\t  createSelector = function(obj) {\n\t    var child, i, j, len, parent, ref, selector;\n\t    selector = [];\n\t    while (obj && obj.nodeName !== 'HTML') {\n\t      parent = obj.parentElement;\n\t      if (parent) {\n\t        ref = parent.children;\n\t        for (i = j = 0, len = ref.length; j < len; i = ++j) {\n\t          child = ref[i];\n\t          if (parent.children[i] === obj) {\n\t            selector.unshift(i);\n\t            break;\n\t          }\n\t        }\n\t      }\n\t      obj = parent;\n\t    }\n\t    selector = selector.join(':');\n\t    return selector;\n\t  };\n\t  getCssRulesForTagStyle = function(stylesheets) {\n\t    var j, k, len, len1, ref, rule, str, style;\n\t    for (j = 0, len = stylesheets.length; j < len; j++) {\n\t      style = stylesheets[j];\n\t      str = \"\";\n\t      if (style.rules) {\n\t        ref = style.rules;\n\t        for (k = 0, len1 = ref.length; k < len1; k++) {\n\t          rule = ref[k];\n\t          str += rule.cssText;\n\t        }\n\t        stylesheetsArray.push([str, createSelector(style.ownerNode)]);\n\t      }\n\t    }\n\t    return console.log(stylesheetsArray);\n\t  };\n\t  getCssRulesForTagStyle(document.styleSheets);\n\t  getUrlMas = function(styleObj) {\n\t    var elem, endIndex, j, key, len, results, startIndex;\n\t    results = [];\n\t    for (j = 0, len = styleObj.length; j < len; j++) {\n\t      elem = styleObj[j];\n\t      startIndex = styleObj[elem].indexOf('url(');\n\t      results.push((function() {\n\t        var results1;\n\t        results1 = [];\n\t        while (startIndex > -1) {\n\t          endIndex = styleObj[elem].indexOf(')', startIndex + 1);\n\t          key = styleObj[elem].substring(startIndex + 4, endIndex);\n\t          console.log(\"URL::\", key);\n\t          if (key.startsWith('\"') || key.startsWith(\"'\")) {\n\t            key = key.substring(1, key.length - 1);\n\t          }\n\t          if (!key.startsWith('#')) {\n\t            linksObj[key] = true;\n\t            console.assert(linksObj[key]);\n\t            console.log('ELEM', key);\n\t          }\n\t          results1.push(startIndex = styleObj[elem].indexOf('url(', endIndex + 1));\n\t        }\n\t        return results1;\n\t      })());\n\t    }\n\t    return results;\n\t  };\n\t  passOnTree = function(elem) {\n\t    var child, children, j, len;\n\t    children = elem.children;\n\t    for (j = 0, len = children.length; j < len; j++) {\n\t      child = children[j];\n\t      passOnTree(child);\n\t    }\n\t    getUrlMas(window.getComputedStyle(elem));\n\t    getUrlMas(window.getComputedStyle(elem, ':after'));\n\t    return getUrlMas(window.getComputedStyle(elem, ':before'));\n\t  };\n\t  passOnTree(document.body);\n\t\n\t  /*!\n\t   * get frame index in page\n\t   * @return {String} - frame index\n\t   * @example 0:3:5\n\t   */\n\t  getFramePath = function() {\n\t    var _get_frame_id, fid;\n\t    fid = [];\n\t\n\t    /*!\n\t     * add frame-ID into fid[] array (recursive)\n\t     * @param {Window} win - parent's Window object\n\t     */\n\t    _get_frame_id = function(win) {\n\t      var frame, frame_idx, idx, j, len, parent, ref;\n\t      parent = win.parent;\n\t      if (win === parent) {\n\t        return;\n\t      }\n\t      idx = '?';\n\t      ref = parent.frames;\n\t      for (frame_idx = j = 0, len = ref.length; j < len; frame_idx = ++j) {\n\t        frame = ref[frame_idx];\n\t        if (win === frame) {\n\t          idx = frame_idx;\n\t          break;\n\t        }\n\t      }\n\t      fid.unshift(idx);\n\t      _get_frame_id(parent);\n\t    };\n\t    _get_frame_id(window);\n\t    return fid.join(':');\n\t  };\n\t\n\t  /*!\n\t   * get frame position on content script\n\t   * @param {HTMLDocument} DOM - DOM document object\n\t   * @return {Object} - frames position on current frame\n\t   * @example [3,0,0]: 0\n\t   */\n\t  getElementPath = function(DOM) {\n\t    var dictionary, frames, getFrameId, i, iframe, j, len, result;\n\t    dictionary = {};\n\t\n\t    /*!\n\t     * get frameID\n\t     * @param {HTMLIframeElement} obj - iframe document object\n\t     * @return {String} - string with index iframe\n\t     * @example [3,0,0]\n\t     */\n\t    getFrameId = function(obj) {\n\t      var _getPositionOfFrame, result;\n\t      result = [];\n\t      _getPositionOfFrame = function(obj) {\n\t        var index, nodeList, parent;\n\t        if (obj.parentElement === DOM) {\n\t\n\t        } else {\n\t          parent = obj.parentElement;\n\t          nodeList = Array.prototype.slice.call(parent.children);\n\t          index = nodeList.indexOf(obj);\n\t          result.unshift(index);\n\t          return _getPositionOfFrame(parent);\n\t        }\n\t      };\n\t      _getPositionOfFrame(obj);\n\t      return JSON.stringify(result);\n\t    };\n\t    frames = DOM.getElementsByTagName('iframe');\n\t    for (j = 0, len = frames.length; j < len; j++) {\n\t      iframe = frames[j];\n\t      i = 0;\n\t      while (i < window.frames.length) {\n\t        if (iframe.contentWindow === window.frames[i]) {\n\t          dictionary[getFrameId(iframe, DOM)] = i;\n\t          result = [];\n\t          break;\n\t        }\n\t        i++;\n\t      }\n\t    }\n\t    return dictionary;\n\t  };\n\t\n\t  /*!\n\t   * get page doctype with all atributes'\n\t   * @param {DocumentType} doctype - document doctype object\n\t   * @return {array} - array with attributes of doctype page\n\t   * @return null - if doctype is absent\n\t   * @example [\"html\",\"w3c\",\"\"]\n\t   */\n\t  getDoctype = function(doctype) {\n\t    if (doctype != null) {\n\t      return [doctype.name, doctype.publicId, doctype.systemId];\n\t    }\n\t    return null;\n\t  };\n\t\n\t  /*!\n\t   * get attributes of tag <html ...>...</html>\n\t   * @param {array} array - array with html attributes\n\t   * @return {array} - array with attributes of tag <html>\n\t   * @example [\"lang\",\"en\",\"class\",\"is-copy-enable\"]\n\t   */\n\t  getAttribute = function(array) {\n\t    var elem, j, len, mas;\n\t    mas = [];\n\t    for (j = 0, len = array.length; j < len; j++) {\n\t      elem = array[j];\n\t      mas.push(elem.nodeName, elem.nodeValue);\n\t    }\n\t    return mas;\n\t  };\n\t  return [[document.URL, document.location.protocol], document.documentElement.innerHTML, getAttribute(document.documentElement.attributes), getFramePath(), getElementPath(document.documentElement), getDoctype(document.doctype), linksObj, stylesheetsArray];\n\t};\n\t\n\tdeleteIframesFromHead = function(head) {\n\t  var frames, i, j, ref;\n\t  frames = head.querySelectorAll('iframe');\n\t  for (i = j = 0, ref = frames.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n\t    frames[i].parentElement.removeChild(frames[i]);\n\t    i--;\n\t  }\n\t  return head;\n\t};\n\t\n\t\n\t/*!\n\t * convert html text of every frame to DOM-Tree\n\t * @param {string} htmlText - string with html code\n\t * @return {HTMLDocument} - created DOM with string\n\t */\n\t\n\tgetDocument = function(htmlText, url) {\n\t  var _html, attribute, attributesBody, attributesHead, body, bodyRE, head, headRE, htmlObject, j, k, len, len1, regExp, tempDoc;\n\t  _html = document.implementation.createHTMLDocument();\n\t  regExp = /(?:<!--[\\s\\S]*?-->|\\s)*(<head[\\s\\S]*?>[\\s\\S]*?<\\/head>)([\\s\\S]*)$/mi;\n\t  headRE = /<head(?:[\\s\\S]*?)>([\\s\\S]*?)<\\/head>/;\n\t  bodyRE = /<body(?:[\\s\\S]*?)>([\\s\\S]*?)<\\/body>/;\n\t  htmlObject = regExp.exec(htmlText);\n\t  head = htmlObject[1];\n\t  body = htmlObject[2];\n\t  tempDoc = document.createElement('html');\n\t  tempDoc.innerHTML = head + body;\n\t  console.log(tempDoc);\n\t  attributesBody = tempDoc.getElementsByTagName('body')[0].attributes;\n\t  attributesHead = tempDoc.getElementsByTagName('head')[0].attributes;\n\t  if (htmlObject != null) {\n\t    _html.head.innerHTML = headRE.exec(head)[1];\n\t    _html.head = deleteIframesFromHead(_html.head);\n\t    _html.body.innerHTML = bodyRE.exec(body)[1];\n\t    for (j = 0, len = attributesBody.length; j < len; j++) {\n\t      attribute = attributesBody[j];\n\t      _html.body.setAttribute(attribute.name, attribute.value);\n\t    }\n\t    for (k = 0, len1 = attributesHead.length; k < len1; k++) {\n\t      attribute = attributesHead[k];\n\t      _html.head.setAttribute(attribute.name, attribute.value);\n\t    }\n\t  }\n\t  return _html;\n\t};\n\t\n\t\n\t/*!\n\t * get frame position on background script\n\t * @param {HTMLIframeElement} - iframe that we want find position,\n\t * @param {HTMLDocument} - DOM that are parent of this iframe,\n\t * @return {String} - string with iframe position\n\t * @example [3,0,0]\n\t */\n\t\n\tgetFramePosition = function(obj, DOM) {\n\t  var _getPositionOfFrame, result;\n\t  result = [];\n\t  _getPositionOfFrame = function(obj) {\n\t    var index, nodeList, parent;\n\t    if (obj.parentElement === DOM.documentElement) {\n\t\n\t    } else {\n\t      parent = obj.parentElement;\n\t      nodeList = Array.prototype.slice.call(parent.children);\n\t      index = nodeList.indexOf(obj);\n\t      result.unshift(index);\n\t      return _getPositionOfFrame(parent);\n\t    }\n\t  };\n\t  _getPositionOfFrame(obj);\n\t  return JSON.stringify(result);\n\t};\n\t\n\t\n\t/*!\n\t * delete iframe security policy\n\t * @param {HTMLDocument} - DOM object\n\t */\n\t\n\tdeleteMeta = function(document) {\n\t  var metaElements;\n\t  metaElements = document.querySelectorAll('meta[http-equiv]');\n\t  return metaElements.forEach(function(element) {\n\t    var ref, ref1;\n\t    if (ref = element.getAttribute('http-equiv'), indexOf.call(META_ATTRIBS_FOR_DEL, ref) >= 0) {\n\t      return (ref1 = element.parentElement) != null ? ref1.removeChild(element) : void 0;\n\t    }\n\t  });\n\t};\n\t\n\t\n\t/*!\n\t * delete iframe security policy\n\t * @param {HTMLDocument} - DOM object\n\t */\n\t\n\tdeleteSendBoxAttrib = function(document) {\n\t  var iframes;\n\t  iframes = document.querySelectorAll('iframe[sendbox]');\n\t  return iframes.forEach(function(iframe) {\n\t    return iframe.removeAttribute('sendbox');\n\t  });\n\t};\n\t\n\t\n\t/*!\n\t * add meta tag informing that this page is saved by PageCatch\n\t * @param {HTMLDocument} - DOM of current document,\n\t * @param {String} - string with url of current iframe,\n\t * NOTE: if original-url meta alread exists (with original site url), do\n\t * not create a new one. It means, that we resave already stored page\n\t */\n\t\n\taddMeta = function(DOM, url) {\n\t  var head, meta, ref;\n\t  if (!DOM.querySelector('meta[name=\"original-url\"]')) {\n\t    meta = document.createElement('meta');\n\t    meta.setAttribute('name', 'original-url');\n\t    meta.setAttribute('content', url);\n\t    head = (ref = DOM.getElementsByTagName('head')[0]) != null ? ref : DOM.getElementsByTagName('body')[0];\n\t    return head.insertBefore(meta, head.children[0]);\n\t  }\n\t};\n\t\n\t\n\t/*!\n\t * run functions for delete security policy\n\t * @param {HTMLDocument} - DOM of current document\n\t * @param {String} - string with url of current iframe\n\t */\n\t\n\tdefaultCleanUp = function(document, url) {\n\t  deleteMeta(document);\n\t  deleteSendBoxAttrib(document);\n\t  return addMeta(document, url);\n\t};\n\t\n\t\n\t/*!\n\t * take html attributes for save\n\t * @param {array} array - array with attributes of tag <html>...</html>,\n\t * @param {DocumentElement} status - Doctype of document,\n\t * @return {String} - string with html code with all atributes + doctype\n\t * @example \"<! DOCTYPE html> <html lang=\"en\" class=\"is-absent\"><head>...</html>\"\n\t */\n\t\n\tgetAttribute = function(array, status) {\n\t  var doctype, i, j, ref, src;\n\t  src = \"<html \";\n\t  for (i = j = 0, ref = array.length; j < ref; i = j += 2) {\n\t    if (array[i + 1] != null) {\n\t      src += array[i] + '=\"' + array[i + 1] + '\" ';\n\t    } else {\n\t      break;\n\t    }\n\t  }\n\t  if (status != null) {\n\t    doctype = getDoctype(status);\n\t    return doctype + src + \">\";\n\t  }\n\t  return src += \">\";\n\t};\n\t\n\t\n\t/*!\n\t * take doctype with attributes for save\n\t * @param {array} array - array with attributes of doctype,\n\t * @return {String} - string with doctype of page\n\t * @example \"<!DOCTYPE html>\"\n\t */\n\t\n\tgetDoctype = function(array) {\n\t  var elem, i, j, ref, src;\n\t  src = \"<!DOCTYPE \";\n\t  elem = \"\";\n\t  for (i = j = 0, ref = array.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n\t    if (!array[i].trim()) {\n\t      continue;\n\t    }\n\t    switch (i) {\n\t      case 0:\n\t        src += array[i] + \" \";\n\t        break;\n\t      case 1:\n\t        src += \"PUBLIC \" + '\"' + array[i] + '\" ';\n\t        break;\n\t      case 2:\n\t        src += '\"' + array[i] + '\"';\n\t    }\n\t  }\n\t  return src + \">\";\n\t};\n\t\n\tdeleteElemsFromHead = function(obj) {\n\t  var elem, elems, j, len;\n\t  elems = obj.querySelectorAll('div,img');\n\t  for (j = 0, len = elems.length; j < len; j++) {\n\t    elem = elems[j];\n\t    elem.parentElement.removeChild(elem);\n\t  }\n\t  return document;\n\t};\n\t\n\tcreateSelector = function(obj) {\n\t  var child, i, j, len, parent, ref, selector;\n\t  selector = [];\n\t  while (obj && obj.nodeName !== 'HTML') {\n\t    parent = obj.parentElement;\n\t    if (parent) {\n\t      ref = parent.children;\n\t      for (i = j = 0, len = ref.length; j < len; i = ++j) {\n\t        child = ref[i];\n\t        if (parent.children[i] === obj) {\n\t          selector.unshift(i);\n\t          break;\n\t        }\n\t      }\n\t    }\n\t    obj = parent;\n\t  }\n\t  selector = selector.join(':');\n\t  return selector;\n\t};\n\t\n\t\n\t/*!\n\t * save page\n\t * @param {Number} tabID - number of tab which you want to save,\n\t * @param {Function} cleanUp - function with clean any attributes from page,\n\t * @param {Function} done - function in which will be return html text of\n\t *                          saved page\n\t * @example \"<! DOCTYPE html> <html lang=\"en\" class=\"is-absent\"><head>...</html>\"\n\t */\n\t\n\tgetPage = function(tabID, cleanUp, done) {\n\t  var createNewObj, dictionary, finalize, flag, parse;\n\t  dictionary = {};\n\t  flag = false;\n\t\n\t  /*!\n\t   * parse tags as img,style,link and parse attribute style in any tags with him\n\t   * @param {Function} callback - function that check completing of save\n\t   */\n\t  parse = function(callback) {\n\t    var _style, attributeCounter, attributes, dom, faviconLinks, href, iconCounter, iconFlag, j, k, key, l, len, len1, len2, len3, len4, len5, link, links, m, meta, metas, n, o, ref, ref1, ref2, ref3, ref4, ref5, rel, selector, src, style, styleTags, tag, tagCounter, tags, tagsStyles, url, urlMas;\n\t    metas = (ref = dictionary[\"\"]) != null ? ref.document.querySelectorAll('[name]') : void 0;\n\t    for (j = 0, len = metas.length; j < len; j++) {\n\t      meta = metas[j];\n\t      if (meta.getAttribute('name') === 'original-url') {\n\t        flag = true;\n\t        callback(0, 0, 0);\n\t        return;\n\t      }\n\t    }\n\t    faviconLinks = [];\n\t    links = (ref1 = dictionary[\"\"]) != null ? ref1.document.querySelectorAll('link') : void 0;\n\t    iconFlag = false;\n\t    for (k = 0, len1 = links.length; k < len1; k++) {\n\t      link = links[k];\n\t      rel = link.getAttribute('rel');\n\t      if (rel.indexOf('icon') !== -1) {\n\t        if (rel === 'icon') {\n\t          iconFlag = true;\n\t        }\n\t        faviconLinks.push(link);\n\t      }\n\t    }\n\t    if (!iconFlag) {\n\t      url = (ref2 = dictionary[\"\"]) != null ? ref2.url[0] : void 0;\n\t      urlMas = url.split('/');\n\t      urlMas = urlMas.slice(0, 3);\n\t      url = urlMas.join('/') + '/favicon.ico';\n\t      link = document.createElement('link');\n\t      link.setAttribute('rel', 'icon');\n\t      iconCounter = 1;\n\t      xhrToBase64(url, link, function(error, tag, result) {\n\t        var href;\n\t        if (error != null) {\n\t          iconCounter--;\n\t          return console.error(\"(src)Base 64 error:\", error.stack);\n\t        } else {\n\t          if (result === \"\") {\n\t            iconCounter++;\n\t            if (faviconLinks.length !== 0) {\n\t              href = faviconLinks[0].getAttribute('href');\n\t            } else {\n\t              iconCounter--;\n\t            }\n\t            callback(tagCounter, attributeCounter, iconCounter);\n\t            xhrToBase64(href, tag, function(error, tag, result) {\n\t              if (error != null) {\n\t                iconCounter--;\n\t                console.error(\"(src)Base 64 error:\", error.stack);\n\t              } else {\n\t                tag.setAttribute(\"href\", result);\n\t                dictionary[\"\"].document.head.appendChild(tag);\n\t                iconCounter--;\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t          } else {\n\t            tag.setAttribute(\"href\", result);\n\t            dictionary[\"\"].document.head.appendChild(tag);\n\t            iconCounter--;\n\t          }\n\t          return callback(tagCounter, attributeCounter, iconCounter);\n\t        }\n\t      });\n\t    }\n\t    attributeCounter = 0;\n\t    tagCounter = 0;\n\t    for (key in dictionary) {\n\t      dom = dictionary[key];\n\t      dom.document.head = deleteElemsFromHead(dom.document.head);\n\t      console.log(dom.document);\n\t      styleTags = dom.document.querySelectorAll('style');\n\t      for (l = 0, len2 = styleTags.length; l < len2; l++) {\n\t        style = styleTags[l];\n\t        if (style.innerHTML.length === 0) {\n\t          selector = createSelector(style);\n\t          ref3 = dom.styleSheets;\n\t          for (m = 0, len3 = ref3.length; m < len3; m++) {\n\t            _style = ref3[m];\n\t            if (_style[1] === selector) {\n\t              style.innerHTML = _style[0];\n\t              break;\n\t            }\n\t          }\n\t        }\n\t      }\n\t      tagsStyles = dom.document.querySelectorAll('*[style]');\n\t      for (n = 0, len4 = tagsStyles.length; n < len4; n++) {\n\t        tag = tagsStyles[n];\n\t        attributeCounter++;\n\t        inlineCSS(tag.getAttribute('style'), tag, dom.url[0], dom, [], function(error, tag, dom, result) {\n\t          attributeCounter--;\n\t          if (error != null) {\n\t            console.error(\"Style attr error\", error);\n\t          } else {\n\t            tag.setAttribute('style', result);\n\t          }\n\t          return callback(tagCounter, attributeCounter, iconCounter);\n\t        });\n\t      }\n\t      tags = dom.document.querySelectorAll('img,link,source,style');\n\t      for (o = 0, len5 = tags.length; o < len5; o++) {\n\t        tag = tags[o];\n\t        tagCounter++;\n\t        if (tag.nodeName === 'LINK') {\n\t          if (((ref4 = tag.getAttribute('rel')) === \"stylesheet\" || ref4 === \"prefetch stylesheet\")) {\n\t            href = convertURL(tag.getAttribute('href'), dom.url[0], dom.url[1]);\n\t            attributes = tag.attributes;\n\t            inlineCSS(getXHR(href), tag, href, dom, attributes, function(error, tag, dom, result, attributes) {\n\t              var attribute, len6, p, parent;\n\t              tagCounter--;\n\t              if (error != null) {\n\t                console.error(\"style error\", error);\n\t              } else {\n\t                console.log('INLINECSSS_END', tag);\n\t                style = document.createElement('style');\n\t                style.innerHTML = result;\n\t                for (p = 0, len6 = attributes.length; p < len6; p++) {\n\t                  attribute = attributes[p];\n\t                  style.setAttribute(attribute.name, attribute.value);\n\t                }\n\t                parent = tag.parentElement;\n\t                parent.insertBefore(style, tag);\n\t                parent.removeChild(tag);\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t            continue;\n\t          } else if (ref5 = tag.getAttribute('rel'), indexOf.call(badLinksRel, ref5) >= 0) {\n\t            tag.parentElement.removeChild(tag);\n\t            tagCounter--;\n\t            continue;\n\t          } else {\n\t            href = convertURL(tag.getAttribute('href'), dom.url[0], dom.url[1]);\n\t            xhrToBase64(href, tag, function(error, tag, result) {\n\t              tagCounter--;\n\t              if (error != null) {\n\t                console.error(\"(href) xhrToBase64 error (href=\" + href + \"):\", error.stack);\n\t              } else {\n\t                tag.setAttribute(\"href\", result);\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t            continue;\n\t          }\n\t        }\n\t        if (tag.nodeName === 'IMG') {\n\t          if (tag.hasAttribute('srcset') && !tag.hasAttribute('src')) {\n\t            src = convertURL(tag.getAttribute('srcset'), dom.url[0], dom.url[1]);\n\t            xhrToBase64(src, tag, function(error, tag, result) {\n\t              tagCounter--;\n\t              if (error != null) {\n\t                console.error(\"(src)Base 64 error:\", error.stack);\n\t              } else {\n\t                tag.setAttribute(\"srcset\", result);\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t            continue;\n\t          } else if (tag.hasAttribute('src') && !tag.hasAttribute('srcset')) {\n\t            src = convertURL(tag.getAttribute('src'), dom.url[0], dom.url[1]);\n\t            xhrToBase64(src, tag, function(error, tag, result) {\n\t              tagCounter--;\n\t              if (error != null) {\n\t                console.error(\"(src)Base 64 error:\", error.stack);\n\t              } else {\n\t                tag.setAttribute(\"src\", result);\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t            continue;\n\t          } else if (tag.hasAttribute('src') && tag.hasAttribute('srcset')) {\n\t            tag.setAttribute('srcset', \"\");\n\t            src = convertURL(tag.getAttribute('src'), dom.url[0], dom.url[1]);\n\t            xhrToBase64(src, tag, function(error, tag, result) {\n\t              tagCounter--;\n\t              if (error != null) {\n\t                console.error(\"(src)Base 64 error:\", error.stack);\n\t              } else {\n\t                tag.setAttribute(\"src\", result);\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t            continue;\n\t          } else {\n\t            tagCounter--;\n\t            continue;\n\t          }\n\t        }\n\t        if (tag.nodeName === 'STYLE') {\n\t          inlineCSS(tag.innerHTML, tag, dom.url[0], dom, [], function(error, tag, dom, result) {\n\t            tagCounter--;\n\t            if (error != null) {\n\t              console.error(\"(style)inlineCSS error:\", error.stack);\n\t              console.error(tag.innerHTML);\n\t            } else {\n\t              tag.innerHTML = result;\n\t            }\n\t            return callback(tagCounter, attributeCounter, iconCounter);\n\t          });\n\t          continue;\n\t        }\n\t        if (tag.nodeName === 'SOURCE') {\n\t          if (tag.type.indexOf('video') > -1 || tag.type.indexOf('audio') > -1) {\n\t            tagCounter--;\n\t            continue;\n\t          } else if (tag.hasAttribute('srcset') && !tag.hasAttribute('src')) {\n\t            src = convertURL(tag.getAttribute('srcset'), dom.url[0], dom.url[1]);\n\t            xhrToBase64(src, tag, function(error, tag, result) {\n\t              tagCounter--;\n\t              if (error != null) {\n\t                console.error(\"(src)Base 64 error:\", error.stack);\n\t              } else {\n\t                tag.setAttribute(\"srcset\", result);\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t            continue;\n\t          } else if (tag.hasAttribute('src') && !tag.hasAttribute('srcset')) {\n\t            src = convertURL(tag.getAttribute('src'), dom.url[0], dom.url[1]);\n\t            xhrToBase64(src, tag, function(error, tag, result) {\n\t              tagCounter--;\n\t              if (error != null) {\n\t                console.error(\"(src)Base 64 error:\", error.stack);\n\t              } else {\n\t                tag.setAttribute(\"src\", result);\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t            continue;\n\t          } else if (tag.hasAttribute('src') && tag.hasAttribute('srcset')) {\n\t            tag.setAttribute('srcset', \"\");\n\t            src = convertURL(tag.getAttribute('src'), dom.url[0], dom.url[1]);\n\t            xhrToBase64(src, tag, function(error, tag, result) {\n\t              tagCounter--;\n\t              if (error != null) {\n\t                console.error(\"(src)Base 64 error:\", error.stack);\n\t              } else {\n\t                tag.setAttribute(\"src\", result);\n\t              }\n\t              return callback(tagCounter, attributeCounter, iconCounter);\n\t            });\n\t            continue;\n\t          } else {\n\t            tagCounter--;\n\t            continue;\n\t          }\n\t        }\n\t      }\n\t    }\n\t    flag = true;\n\t    return callback(tagCounter, attributeCounter, iconCounter);\n\t  };\n\t\n\t  /*!\n\t   * create one object from dictionary of frames\n\t   * @param {Object} obj - obj of dictionary(any frame from page)\n\t   * @param {String} str - string with current index in recursive\n\t   */\n\t  createNewObj = function(obj, str) {\n\t    var _document, _url, frame, frames, index, j, key, len, results, selector, source;\n\t    frames = obj.document.getElementsByTagName('iframe');\n\t    results = [];\n\t    for (j = 0, len = frames.length; j < len; j++) {\n\t      frame = frames[j];\n\t      selector = getFramePosition(frame, obj.document);\n\t      index = -1;\n\t      for (key in obj.framesIdx) {\n\t        if (selector === key) {\n\t          index = obj.framesIdx[key];\n\t        }\n\t      }\n\t      if (index === -1) {\n\t        continue;\n\t      }\n\t      key = str + index;\n\t      if (dictionary[key] != null) {\n\t        createNewObj(dictionary[key], key + \":\");\n\t        _url = dictionary[key].url;\n\t        _document = dictionary[key].document;\n\t        defaultCleanUp(_document, _url);\n\t        if (typeof cleanUp === \"function\") {\n\t          cleanUp(_document, _url);\n\t        }\n\t        source = getAttribute(dictionary[key].header, dictionary[key].doctype) + _document.documentElement.innerHTML + \"</html>\";\n\t        results.push(frame.setAttribute('srcdoc', source));\n\t      } else {\n\t        results.push(void 0);\n\t      }\n\t    }\n\t    return results;\n\t  };\n\t\n\t  /*!\n\t   * finish and return string with complete all resourses in one HTML\n\t   * @param {Number} counter - counter of tags\n\t   * @param {Number} counter1 - counter of attributes\n\t   */\n\t  finalize = function(counter, counter1, counter2) {\n\t    var _document, _url, result;\n\t    console.log(counter, counter1, flag);\n\t    if (counter === 0 && counter1 === 0 && counter2 === 0 && flag === true) {\n\t      createNewObj(dictionary[\"\"], \"\");\n\t      _url = dictionary[\"\"].url;\n\t      _document = dictionary[\"\"].document;\n\t      defaultCleanUp(_document, _url);\n\t      if (typeof cleanUp === \"function\") {\n\t        cleanUp(_document, _url);\n\t      }\n\t      result = getAttribute(dictionary[\"\"].header, dictionary[\"\"].doctype) + _document.documentElement.innerHTML + \"</html>\";\n\t      if (typeof done === \"function\") {\n\t        done(result);\n\t      }\n\t      dictionary = {};\n\t      return flag = false;\n\t    }\n\t  };\n\t  return chrome.tabs.executeScript(tabID, {\n\t    code: \"(\" + getSource.toString() + \")()\",\n\t    allFrames: true,\n\t    matchAboutBlank: true\n\t  }, function(arrays) {\n\t    var dom, j, len, obj;\n\t    for (j = 0, len = arrays.length; j < len; j++) {\n\t      dom = arrays[j];\n\t      obj = {\n\t        url: dom[0],\n\t        header: dom[2],\n\t        document: getDocument(dom[1], dom[0]),\n\t        framesIdx: dom[4],\n\t        doctype: dom[5],\n\t        actualUrls: dom[6],\n\t        styleSheets: dom[7]\n\t      };\n\t      dictionary[dom[3]] = obj;\n\t    }\n\t    return parse(finalize);\n\t  });\n\t};\n\t\n\tmodule.exports = getPage;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tvar xhrToBase64;\n\t\n\txhrToBase64 = function(url, elem, callback) {\n\t  var reader, xhr;\n\t  console.log(\"BASE64URL\", url);\n\t  if (url.indexOf(\"data:\") >= 0 || url.length < 10) {\n\t    return callback(null, elem, url);\n\t  } else {\n\t    xhr = new XMLHttpRequest();\n\t    xhr.open('GET', url, true);\n\t    xhr.responseType = 'blob';\n\t    reader = new FileReader();\n\t    xhr.onload = function(e) {\n\t      var blob;\n\t      if (this.status !== 200) {\n\t        return callback(null, elem, \" \", url);\n\t      } else {\n\t        blob = this.response;\n\t        reader.onloadend = function() {\n\t          return callback(null, elem, reader.result, url);\n\t        };\n\t        return reader.readAsDataURL(blob);\n\t      }\n\t    };\n\t    xhr.onerror = function(e) {\n\t      console.error(\"XHR Error \" + e.target.status + \" occurred while receiving the document.\");\n\t      return callback(e, elem, \" \", url);\n\t    };\n\t    return xhr.send();\n\t  }\n\t};\n\t\n\tmodule.exports = xhrToBase64;\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tvar indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\t\n\tmodule.exports = function(url, main, protocol) {\n\t  var flag, i, indexURL, indexURLS, len, mainURLS;\n\t  flag = false;\n\t  if ((url[0] === '\"' && url[url.length - 1] === '\"') || (url[0] === \"'\" && url[url.length - 1] === \"'\")) {\n\t    url = url.substr(1, url.length - 2);\n\t  }\n\t  if (url.startsWith('data:')) {\n\t    return url;\n\t  }\n\t  url = url.replace(/\\s/g, '');\n\t  main = main.split('#')[0];\n\t  if (url.startsWith('//')) {\n\t    return protocol + url;\n\t  }\n\t  if (url.match(/^[\\w\\-_\\d]+:/)) {\n\t    return url;\n\t  }\n\t  if (url[0] === '/' && url[1] !== '/') {\n\t    flag = true;\n\t    mainURLS = main.split('/');\n\t    mainURLS = mainURLS.slice(0, 3);\n\t    main = mainURLS.join('/');\n\t    return main + url;\n\t  }\n\t  mainURLS = main.split('/');\n\t  if (indexOf.call(mainURLS[mainURLS.length - 1], '.') >= 0 && !flag) {\n\t    mainURLS.pop();\n\t  }\n\t  if (mainURLS[mainURLS.length - 1] === \"\") {\n\t    mainURLS.pop();\n\t  }\n\t  indexURLS = url.split('/');\n\t  for (i = 0, len = indexURLS.length; i < len; i++) {\n\t    indexURL = indexURLS[i];\n\t    if (indexURL === '..') {\n\t      mainURLS.pop();\n\t    } else if (indexURL === '.') {\n\t      continue;\n\t    } else {\n\t      mainURLS.push(indexURL);\n\t    }\n\t  }\n\t  return mainURLS.join('/');\n\t};\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(url) {\n\t  var e, xhr;\n\t  try {\n\t    xhr = new XMLHttpRequest();\n\t    xhr.open('GET', url, false);\n\t    xhr.send();\n\t    if (xhr.status === 200) {\n\t      return xhr.responseText;\n\t    } else {\n\t      return \" \";\n\t    }\n\t  } catch (error) {\n\t    e = error;\n\t    console.error(\"XHR\", e.stack);\n\t    return \" \";\n\t  }\n\t};\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar addNewActualUrls, convertToBase64, convertURL, getCounter, getXHR;\n\t\n\tconvertURL = __webpack_require__(2);\n\t\n\tconvertToBase64 = __webpack_require__(1);\n\t\n\tgetXHR = __webpack_require__(3);\n\t\n\tgetCounter = function(urlMas, actualUrls) {\n\t  var counter, i, j, ref;\n\t  counter = 0;\n\t  for (i = j = 0, ref = urlMas.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n\t    if (actualUrls[urlMas[i]]) {\n\t      counter++;\n\t    }\n\t  }\n\t  return counter;\n\t};\n\t\n\taddNewActualUrls = function(htmlText, actualUrls, source) {\n\t  var obj, re, re1, url;\n\t  re = /@font-face\\s*\\{[\\s\\S]*?src\\s*:\\s*(?:url\\(\\s*(['\"])?([\\s\\S]*?)\\1\\s*\\))+[\\s\\S]*?.*?\\}/g;\n\t  re1 = /url\\(\\s*(['\"])?([\\s\\S]*?)\\1\\s*\\)/g;\n\t  while ((obj = re.exec(htmlText)) != null) {\n\t    while ((url = re1.exec(obj[0])) != null) {\n\t      actualUrls[convertURL(url[2], source)] = true;\n\t    }\n\t  }\n\t  return actualUrls;\n\t};\n\t\n\tmodule.exports = function(src, element, source, dom, attributes, callback) {\n\t  var convMas, counter, elemMas, flag, i, j, lastIndex, obj, re, ref, regExp, urlMas;\n\t  flag = false;\n\t  if (src.indexOf(\"@import\") > -1) {\n\t    re = /@import\\s+(?:url\\((['\"])?([\\s\\S]*?)\\1\\)|(['\"])?([\\s\\S]*?)\\3)\\s*[^;]*?(?:;|$)/gmi;\n\t    src = src.replace(re, function(str) {\n\t      var temp;\n\t      temp = re.exec(str);\n\t      if (temp[2] != null) {\n\t        return getXHR(convertURL(temp[2], source));\n\t      }\n\t      if (temp[4] != null) {\n\t        return getXHR(convertURL(temp[4], source));\n\t      }\n\t    });\n\t  }\n\t  if (src.indexOf(\"url(\") < 0) {\n\t    return callback(null, element, dom, src, attributes);\n\t  } else {\n\t    urlMas = [];\n\t    elemMas = [];\n\t    convMas = [];\n\t    lastIndex = 0;\n\t    regExp = /([\\s\\S]*?url\\()\\s*(['\"]?)([\\s\\S]*?)\\2\\s*(\\))/gmi;\n\t    obj = regExp.exec(src);\n\t    while (obj != null) {\n\t      elemMas.push(obj[1], obj[4]);\n\t      urlMas.push(convertURL(obj[3], source));\n\t      lastIndex = regExp.lastIndex;\n\t      if (src.indexOf('url(', lastIndex + 1) > -1) {\n\t        obj = regExp.exec(src);\n\t      } else {\n\t        elemMas.push(src.slice(lastIndex));\n\t        lastIndex = src.length;\n\t        break;\n\t      }\n\t    }\n\t    elemMas.push(src.slice(lastIndex));\n\t    dom.actualUrls = addNewActualUrls(src, dom.actualUrls, source);\n\t    console.log(\"MASIVE\", urlMas, dom.actualUrls);\n\t    counter = getCounter(urlMas, dom.actualUrls);\n\t    for (i = j = 0, ref = urlMas.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n\t      if (dom.actualUrls[urlMas[i]]) {\n\t        flag = true;\n\t        dom.actualUrls[urlMas[i]];\n\t        console.log('COUNTER++', counter);\n\t        convertToBase64(urlMas[i], element, function(error, obj, result, url) {\n\t          var index, urlIndex;\n\t          counter--;\n\t          console.log(counter);\n\t          if (error != null) {\n\t            console.error(\"Error base64:\", error.stack);\n\t          } else {\n\t            dom.actualUrls[url] = result;\n\t          }\n\t          if (counter === 0) {\n\t            console.log(dom.actualUrls);\n\t            src = [];\n\t            index = 0;\n\t            urlIndex = 0;\n\t            while (index < elemMas.length) {\n\t              src.push(elemMas[index]);\n\t              index++;\n\t              if (urlMas[urlIndex] != null) {\n\t                if (dom.actualUrls[urlMas[urlIndex]] || urlMas[urlIndex].startsWith('data:')) {\n\t                  if (urlMas[urlIndex].startsWith('data:')) {\n\t                    src.push('\"' + urlMas[urlIndex] + '\"');\n\t                  } else {\n\t                    src.push('\"' + dom.actualUrls[urlMas[urlIndex]] + '\"');\n\t                  }\n\t                } else {\n\t                  src.push('\"\"');\n\t                }\n\t              }\n\t              if ((elemMas[index] != null)) {\n\t                src.push(elemMas[index]);\n\t              }\n\t              index++;\n\t              urlIndex++;\n\t            }\n\t            return callback(null, element, dom, src.join(\"\"), attributes);\n\t          }\n\t        });\n\t      }\n\t    }\n\t    if (!flag) {\n\t      return callback(null, element, dom, elemMas.join(''), attributes);\n\t    }\n\t  }\n\t};\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// page-catch.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 278cbffcc216239019c4","xhrToBase64 = require './modules/xhr-to-base64.coffee'\r\nconvertURL = require './modules/get-relative-link.coffee'\r\ngetXHR = require './modules/xhr.coffee'\r\ninlineCSS = require './modules/inline-css.coffee'\r\n\r\n\r\nbadLinksRel = [\r\n  'dns-prefetch', 'canonical','publisher',\r\n  'prefetch', ' alternate', 'bb:rum'\r\n]\r\nMETA_ATTRIBS_FOR_DEL = [\r\n  'Content-Security-Policy'\r\n  'refresh'\r\n]\r\n\r\nclass TreeElementNotFound extends Error\r\n\r\n\r\n# get array with information of every frame\r\ngetSource = () ->\r\n  linksObj = {}\r\n  stylesheetsArray = []\r\n\r\n\r\n  createSelector = (obj)->\r\n    selector = []\r\n    while (obj && obj.nodeName != 'HTML')\r\n      parent = obj.parentElement\r\n      if (parent)\r\n        for child,i in parent.children\r\n          if (parent.children[i] == obj)\r\n            selector.unshift(i)\r\n            break\r\n      obj = parent\r\n    selector = selector.join(':')\r\n\r\n    return selector\r\n\r\n\r\n  getCssRulesForTagStyle = (stylesheets) ->\r\n    for style in stylesheets\r\n      str = \"\"\r\n      if style.rules\r\n        for rule in style.rules\r\n          str+= rule.cssText\r\n        stylesheetsArray.push [str,createSelector(style.ownerNode)]\r\n    console.log stylesheetsArray\r\n  getCssRulesForTagStyle(document.styleSheets)\r\n\r\n\r\n  getUrlMas = (styleObj) ->\r\n    for elem in styleObj\r\n      startIndex = styleObj[elem].indexOf('url(')\r\n      while startIndex > -1\r\n        endIndex = styleObj[elem].indexOf(')', startIndex + 1)\r\n        key = styleObj[elem].substring(startIndex + 4, endIndex)\r\n        console.log \"URL::\", key\r\n        if key.startsWith('\"') or key.startsWith(\"'\")\r\n          key = key.substring(1, key.length - 1)\r\n        if not key.startsWith('#')\r\n          linksObj[key] = true\r\n          console.assert linksObj[key]\r\n          console.log 'ELEM', key\r\n        startIndex = styleObj[elem].indexOf('url(', endIndex + 1)\r\n\r\n  passOnTree = (elem) ->\r\n    children = elem.children\r\n    for child in children\r\n      passOnTree(child)\r\n    getUrlMas(window.getComputedStyle(elem))\r\n    getUrlMas(window.getComputedStyle(elem, ':after'))\r\n    getUrlMas(window.getComputedStyle(elem, ':before'))\r\n\r\n  passOnTree(document.body)\r\n  \r\n  ###!\r\n  # get frame index in page\r\n  # @return {String} - frame index\r\n  # @example 0:3:5\r\n  ###\r\n  getFramePath = () ->\r\n    fid = []\r\n\r\n    ###!\r\n    # add frame-ID into fid[] array (recursive)\r\n    # @param {Window} win - parent's Window object\r\n    ###\r\n    _get_frame_id = (win) ->\r\n      parent = win.parent\r\n      return if win == parent\r\n      idx = '?'\r\n      for frame, frame_idx in parent.frames\r\n        if win == frame\r\n          idx = frame_idx\r\n          break\r\n      fid.unshift idx\r\n      _get_frame_id(parent)\r\n      return\r\n    _get_frame_id(window)\r\n    return fid.join ':'\r\n\r\n  ###!\r\n  # get frame position on content script\r\n  # @param {HTMLDocument} DOM - DOM document object\r\n  # @return {Object} - frames position on current frame\r\n  # @example [3,0,0]: 0\r\n  ###\r\n  getElementPath = (DOM) ->\r\n    dictionary = {}\r\n\r\n    ###!\r\n    # get frameID\r\n    # @param {HTMLIframeElement} obj - iframe document object\r\n    # @return {String} - string with index iframe\r\n    # @example [3,0,0]\r\n    ###\r\n    getFrameId = (obj) ->\r\n      result = []\r\n      _getPositionOfFrame = (obj)->\r\n        if obj.parentElement == DOM\r\n          return\r\n        else\r\n          parent = obj.parentElement\r\n          nodeList = Array.prototype.slice.call(parent.children)\r\n          index = nodeList.indexOf(obj)\r\n          result.unshift(index)\r\n          _getPositionOfFrame(parent)\r\n      _getPositionOfFrame(obj)\r\n      #console.log result\r\n      return JSON.stringify(result)\r\n\r\n    frames = DOM.getElementsByTagName 'iframe'\r\n    #console.log frames.length\r\n    for iframe in frames\r\n      i = 0\r\n      while i<window.frames.length\r\n        if iframe.contentWindow == window.frames[i]\r\n          #console.log getFrameId(iframe, DOM)\r\n          dictionary[getFrameId(iframe, DOM)] = i\r\n          result = []\r\n          break\r\n        i++\r\n    return dictionary\r\n\r\n  ###!\r\n  # get page doctype with all atributes'\r\n  # @param {DocumentType} doctype - document doctype object\r\n  # @return {array} - array with attributes of doctype page\r\n  # @return null - if doctype is absent\r\n  # @example [\"html\",\"w3c\",\"\"]\r\n  ###\r\n  getDoctype = (doctype)->\r\n    if doctype?\r\n      return [doctype.name, doctype.publicId, doctype.systemId]\r\n    return null\r\n  ###!\r\n  # get attributes of tag <html ...>...</html>\r\n  # @param {array} array - array with html attributes\r\n  # @return {array} - array with attributes of tag <html>\r\n  # @example [\"lang\",\"en\",\"class\",\"is-copy-enable\"]\r\n  ###\r\n  getAttribute = (array)->\r\n    mas = []\r\n    for elem in array\r\n      mas.push(elem.nodeName, elem.nodeValue)\r\n    return mas\r\n  # Function returns iframe url, content, html-atributes,\r\n  # iframe-selectors and iframe-path\r\n  return [\r\n    [document.URL, document.location.protocol],\r\n    document.documentElement.innerHTML,\r\n    getAttribute(document.documentElement.attributes),\r\n    getFramePath(),\r\n    getElementPath(document.documentElement),\r\n    getDoctype(document.doctype),\r\n    linksObj,\r\n    stylesheetsArray\r\n  ]\r\n\r\ndeleteIframesFromHead = (head) ->\r\n  frames = head.querySelectorAll('iframe')\r\n  for i in [0...frames.length]\r\n    frames[i].parentElement.removeChild(frames[i])\r\n    i--\r\n  return head\r\n###!\r\n# convert html text of every frame to DOM-Tree\r\n# @param {string} htmlText - string with html code\r\n# @return {HTMLDocument} - created DOM with string\r\n###\r\ngetDocument = (htmlText, url) ->\r\n  _html = document.implementation.createHTMLDocument()\r\n  regExp = /(?:<!--[\\s\\S]*?-->|\\s)*(<head[\\s\\S]*?>[\\s\\S]*?<\\/head>)([\\s\\S]*)$/mi\r\n  headRE = /<head(?:[\\s\\S]*?)>([\\s\\S]*?)<\\/head>/\r\n  bodyRE = /<body(?:[\\s\\S]*?)>([\\s\\S]*?)<\\/body>/\r\n  htmlObject = regExp.exec(htmlText)\r\n  head = htmlObject[1]\r\n  body = htmlObject[2]\r\n  tempDoc = document.createElement('html')\r\n  tempDoc.innerHTML = head+body\r\n  console.log tempDoc\r\n  attributesBody = tempDoc.getElementsByTagName('body')[0].attributes\r\n  attributesHead = tempDoc.getElementsByTagName('head')[0].attributes\r\n  if htmlObject?\r\n    _html.head.innerHTML = headRE.exec(head)[1]\r\n    _html.head = deleteIframesFromHead(_html.head)\r\n    #console.log(_html)\r\n    _html.body.innerHTML = bodyRE.exec(body)[1]\r\n    for attribute in attributesBody\r\n      _html.body.setAttribute attribute.name, attribute.value\r\n    for attribute in attributesHead\r\n      _html.head.setAttribute attribute.name, attribute.value\r\n  #console.log _html.styleSheets\r\n  #console.log _html\r\n  return _html\r\n\r\n###!\r\n# get frame position on background script\r\n# @param {HTMLIframeElement} - iframe that we want find position,\r\n# @param {HTMLDocument} - DOM that are parent of this iframe,\r\n# @return {String} - string with iframe position\r\n# @example [3,0,0]\r\n###\r\ngetFramePosition = (obj, DOM) ->\r\n  result = []\r\n  _getPositionOfFrame = (obj)->\r\n    if obj.parentElement == DOM.documentElement\r\n      return\r\n    else\r\n      parent = obj.parentElement\r\n      nodeList = Array.prototype.slice.call(parent.children)\r\n      index = nodeList.indexOf(obj)\r\n      result.unshift(index)\r\n      _getPositionOfFrame(parent)\r\n  _getPositionOfFrame(obj)\r\n  return JSON.stringify(result)\r\n\r\n###!\r\n# delete iframe security policy\r\n# @param {HTMLDocument} - DOM object\r\n###\r\ndeleteMeta = (document) ->\r\n  metaElements = document.querySelectorAll('meta[http-equiv]')\r\n  metaElements.forEach (element) ->\r\n    if element.getAttribute('http-equiv') in META_ATTRIBS_FOR_DEL\r\n      element.parentElement?.removeChild(element)\r\n\r\n###!\r\n# delete iframe security policy\r\n# @param {HTMLDocument} - DOM object\r\n###\r\ndeleteSendBoxAttrib = (document) ->\r\n  iframes = document.querySelectorAll('iframe[sendbox]')\r\n  iframes.forEach (iframe) ->\r\n    iframe.removeAttribute('sendbox')\r\n\r\n###!\r\n# add meta tag informing that this page is saved by PageCatch\r\n# @param {HTMLDocument} - DOM of current document,\r\n# @param {String} - string with url of current iframe,\r\n# NOTE: if original-url meta alread exists (with original site url), do\r\n# not create a new one. It means, that we resave already stored page\r\n###\r\naddMeta = (DOM, url)->\r\n  if not DOM.querySelector('meta[name=\"original-url\"]')\r\n    meta = document.createElement 'meta'\r\n    meta.setAttribute 'name','original-url'\r\n    meta.setAttribute 'content', url\r\n    head = (\r\n      DOM.getElementsByTagName('head')[0] ?\r\n      DOM.getElementsByTagName('body')[0]\r\n    )\r\n    head.insertBefore meta, head.children[0]\r\n\r\n###!\r\n# run functions for delete security policy\r\n# @param {HTMLDocument} - DOM of current document\r\n# @param {String} - string with url of current iframe\r\n###\r\ndefaultCleanUp = (document,url) ->\r\n  deleteMeta(document)\r\n  deleteSendBoxAttrib(document)\r\n  addMeta(document,url)\r\n\r\n###!\r\n# take html attributes for save\r\n# @param {array} array - array with attributes of tag <html>...</html>,\r\n# @param {DocumentElement} status - Doctype of document,\r\n# @return {String} - string with html code with all atributes + doctype\r\n# @example \"<! DOCTYPE html> <html lang=\"en\" class=\"is-absent\"><head>...</html>\"\r\n###\r\ngetAttribute = (array, status) ->\r\n  src = \"<html \"\r\n  for i in [0...array.length] by 2\r\n    if array[i+1]?\r\n      src += array[i] + '=\"' + array[i+1] + '\" '\r\n    else\r\n      break\r\n  #console.log status\r\n  if status?\r\n    doctype = getDoctype(status)\r\n    #console.log doctype\r\n    return doctype + src + \">\"\r\n  return src += \">\"\r\n\r\n###!\r\n# take doctype with attributes for save\r\n# @param {array} array - array with attributes of doctype,\r\n# @return {String} - string with doctype of page\r\n# @example \"<!DOCTYPE html>\"\r\n###\r\ngetDoctype = (array) ->\r\n  src = \"<!DOCTYPE \"\r\n  elem = \"\"\r\n  for i in [0...array.length]\r\n    continue if not array[i].trim()\r\n    switch i\r\n      when 0 then src += array[i] + \" \"\r\n      when 1 then src += \"PUBLIC \" + '\"' + array[i] + '\" '\r\n      when 2 then src += '\"' + array[i] + '\"'\r\n    #console.log src\r\n  return src + \">\"\r\n\r\n\r\ndeleteElemsFromHead = (obj)->\r\n  elems = obj.querySelectorAll('div,img')\r\n  for elem in elems\r\n    elem.parentElement.removeChild(elem)\r\n  return document\r\n\r\ncreateSelector = (obj)->\r\n  selector = []\r\n  while (obj && obj.nodeName != 'HTML')\r\n    parent = obj.parentElement\r\n    if (parent)\r\n      for child,i in parent.children\r\n        if (parent.children[i] == obj)\r\n          selector.unshift(i)\r\n          break\r\n    obj = parent\r\n  selector = selector.join(':')\r\n\r\n  return selector\r\n###!\r\n# save page\r\n# @param {Number} tabID - number of tab which you want to save,\r\n# @param {Function} cleanUp - function with clean any attributes from page,\r\n# @param {Function} done - function in which will be return html text of\r\n#                          saved page\r\n# @example \"<! DOCTYPE html> <html lang=\"en\" class=\"is-absent\"><head>...</html>\"\r\n###\r\ngetPage = (tabID, cleanUp, done) ->\r\n  dictionary = {}\r\n  flag = false\r\n  \r\n  ###!\r\n  # parse tags as img,style,link and parse attribute style in any tags with him\r\n  # @param {Function} callback - function that check completing of save\r\n  ###\r\n  parse = (callback) ->\r\n    metas = dictionary[\"\"]?.document.querySelectorAll '[name]'\r\n    for meta in metas\r\n      if meta.getAttribute('name') == 'original-url'\r\n        flag = true\r\n        callback 0, 0, 0\r\n        return\r\n    faviconLinks = []\r\n    links = dictionary[\"\"]?.document.querySelectorAll 'link'\r\n    iconFlag = false\r\n    for link in links\r\n      rel = link.getAttribute('rel')\r\n      if rel.indexOf('icon') != -1\r\n        if rel == 'icon'\r\n          iconFlag = true\r\n        faviconLinks.push(link)\r\n    if not iconFlag\r\n      url = dictionary[\"\"]?.url[0]\r\n      urlMas = url.split('/')\r\n      urlMas = urlMas.slice(0,3)\r\n      url = urlMas.join('/') + '/favicon.ico'\r\n      link = document.createElement 'link'\r\n      link.setAttribute 'rel','icon'\r\n      iconCounter = 1\r\n      xhrToBase64 url, link, (error, tag, result) ->\r\n        if error?\r\n          iconCounter--\r\n          console.error \"(src)Base 64 error:\", error.stack\r\n        else\r\n          if result == \"\"\r\n            iconCounter++\r\n            if (faviconLinks.length != 0)\r\n              href = faviconLinks[0].getAttribute('href')\r\n            else\r\n              iconCounter--\r\n            callback tagCounter, attributeCounter, iconCounter\r\n            xhrToBase64 href, tag, (error, tag, result) ->\r\n              if error?\r\n                iconCounter--\r\n                console.error \"(src)Base 64 error:\", error.stack\r\n              else\r\n                tag.setAttribute \"href\", result\r\n                dictionary[\"\"].document.head.appendChild(tag)\r\n                iconCounter--\r\n              callback tagCounter, attributeCounter, iconCounter\r\n          else\r\n            tag.setAttribute \"href\", result\r\n            dictionary[\"\"].document.head.appendChild(tag)\r\n            iconCounter--\r\n          callback tagCounter, attributeCounter, iconCounter\r\n\r\n    attributeCounter = 0\r\n    tagCounter = 0\r\n    for key, dom of dictionary\r\n      dom.document.head = deleteElemsFromHead(dom.document.head)\r\n      console.log dom.document\r\n      styleTags = dom.document.querySelectorAll 'style'\r\n      for style in styleTags\r\n        if style.innerHTML.length == 0\r\n          selector = createSelector(style)\r\n          for _style in dom.styleSheets\r\n            if _style[1] == selector\r\n              style.innerHTML = _style[0]\r\n              break\r\n      tagsStyles = dom.document.querySelectorAll '*[style]'\r\n      for tag in tagsStyles\r\n        attributeCounter++\r\n        inlineCSS tag.getAttribute('style'), tag, dom.url[0], dom, [],\r\n          (error, tag, dom, result) ->\r\n            attributeCounter--\r\n            if error?\r\n              console.error \"Style attr error\", error\r\n            else\r\n              tag.setAttribute('style', result)\r\n            callback tagCounter, attributeCounter, iconCounter\r\n      tags = dom.document.querySelectorAll 'img,link,source,style'\r\n      for tag in tags\r\n        tagCounter++\r\n        if tag.nodeName == 'LINK'\r\n          if (\r\n            tag.getAttribute('rel') in [\"stylesheet\", \"prefetch stylesheet\"]\r\n            )\r\n              href = convertURL(tag.getAttribute('href'), dom.url[0], dom.url[1])\r\n              attributes = tag.attributes\r\n              #console.log \"INLINECSSS_START\",tag\r\n              inlineCSS getXHR(href), tag, href, dom, attributes,\r\n                (error, tag, dom, result,attributes) ->\r\n                  tagCounter--\r\n                  if error?\r\n                    console.error \"style error\", error\r\n                  else\r\n                    console.log 'INLINECSSS_END', tag\r\n                    style = document.createElement 'style'\r\n                    #console.log result1\r\n                    #console.log 'RESULT2', result2\r\n                    style.innerHTML = result\r\n                    for attribute in attributes\r\n                      style.setAttribute attribute.name, attribute.value\r\n                    parent = tag.parentElement\r\n                    parent.insertBefore style, tag\r\n                    parent.removeChild tag\r\n                  callback tagCounter, attributeCounter, iconCounter\r\n              continue\r\n            else if tag.getAttribute('rel') in badLinksRel\r\n              tag.parentElement.removeChild(tag)\r\n              tagCounter--\r\n              continue\r\n            else\r\n              href = convertURL(tag.getAttribute('href'), dom.url[0], dom.url[1])\r\n              xhrToBase64 href, tag, (error, tag, result) ->\r\n                tagCounter--\r\n                if error?\r\n                  console.error \"(href) xhrToBase64 error (href=#{href}):\", \\\r\n                    error.stack\r\n                else\r\n                  tag.setAttribute \"href\", result\r\n                callback tagCounter, attributeCounter, iconCounter\r\n              continue\r\n        if tag.nodeName == 'IMG'\r\n          if tag.hasAttribute('srcset') and not tag.hasAttribute('src')\r\n            src = convertURL tag.getAttribute('srcset'), dom.url[0], dom.url[1]\r\n            xhrToBase64 src, tag, (error, tag, result) ->\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(src)Base 64 error:\", error.stack\r\n              else\r\n                tag.setAttribute \"srcset\", result\r\n              callback tagCounter, attributeCounter, iconCounter\r\n            continue\r\n          else if (tag.hasAttribute('src') and not tag.hasAttribute('srcset'))\r\n            src = convertURL tag.getAttribute('src'), dom.url[0], dom.url[1]\r\n            xhrToBase64 src, tag, (error, tag, result) ->\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(src)Base 64 error:\", error.stack\r\n              else\r\n                tag.setAttribute \"src\", result\r\n              callback tagCounter, attributeCounter, iconCounter\r\n            continue\r\n          else if tag.hasAttribute('src') and tag.hasAttribute('srcset')\r\n            tag.setAttribute('srcset',\"\")\r\n            src = convertURL tag.getAttribute('src'), dom.url[0], dom.url[1]\r\n            xhrToBase64 src, tag, (error, tag, result) ->\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(src)Base 64 error:\", error.stack\r\n              else\r\n                tag.setAttribute \"src\", result\r\n              callback tagCounter, attributeCounter, iconCounter\r\n            continue\r\n          else\r\n            tagCounter--\r\n            continue\r\n        if tag.nodeName == 'STYLE'\r\n          inlineCSS tag.innerHTML, tag, dom.url[0], dom, [],\r\n            (error, tag, dom, result) ->\r\n              #console.log \"INLINECSSS_END\", tag\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(style)inlineCSS error:\", error.stack\r\n                console.error tag.innerHTML\r\n              else\r\n                tag.innerHTML = result\r\n              callback tagCounter, attributeCounter, iconCounter\r\n          continue\r\n        if tag.nodeName == 'SOURCE'\r\n          if tag.type.indexOf('video') > -1 || tag.type.indexOf('audio') > -1\r\n            tagCounter--\r\n            continue\r\n          else if tag.hasAttribute('srcset') and not tag.hasAttribute('src')\r\n            src = convertURL tag.getAttribute('srcset'), dom.url[0], dom.url[1]\r\n            xhrToBase64 src, tag, (error, tag, result) ->\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(src)Base 64 error:\", error.stack\r\n              else\r\n                tag.setAttribute \"srcset\", result\r\n              callback tagCounter, attributeCounter, iconCounter\r\n            continue\r\n          else if (tag.hasAttribute('src') and not tag.hasAttribute('srcset'))\r\n            src = convertURL tag.getAttribute('src'), dom.url[0], dom.url[1]\r\n            xhrToBase64 src, tag, (error, tag, result) ->\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(src)Base 64 error:\", error.stack\r\n              else\r\n                tag.setAttribute \"src\", result\r\n              callback tagCounter, attributeCounter, iconCounter\r\n            continue\r\n          else if tag.hasAttribute('src') and tag.hasAttribute('srcset')\r\n            tag.setAttribute('srcset',\"\")\r\n            src = convertURL tag.getAttribute('src'), dom.url[0], dom.url[1]\r\n            xhrToBase64 src, tag, (error, tag, result) ->\r\n              tagCounter--\r\n              if error?\r\n                console.error \"(src)Base 64 error:\", error.stack\r\n              else\r\n                tag.setAttribute \"src\", result\r\n              callback tagCounter, attributeCounter, iconCounter\r\n            continue\r\n          else\r\n            tagCounter--\r\n            continue\r\n    flag = true\r\n    callback tagCounter, attributeCounter, iconCounter\r\n  ###!\r\n  # create one object from dictionary of frames\r\n  # @param {Object} obj - obj of dictionary(any frame from page)\r\n  # @param {String} str - string with current index in recursive\r\n  ###\r\n  createNewObj = (obj, str) ->\r\n    frames = obj.document.getElementsByTagName 'iframe'\r\n    for frame in frames\r\n      selector = getFramePosition(frame, obj.document)\r\n      #console.log selector\r\n      index = -1\r\n      for key of obj.framesIdx\r\n        #console.log key\r\n        if selector == key\r\n          index= obj.framesIdx[key]\r\n      if index == -1\r\n        continue\r\n      key = str + index\r\n      if dictionary[key]?\r\n        createNewObj dictionary[key], key+\":\"\r\n        _url = dictionary[key].url\r\n        _document = dictionary[key].document\r\n        defaultCleanUp _document, _url\r\n        cleanUp?(_document, _url)\r\n        source = getAttribute(\r\n          dictionary[key].header,\r\n          dictionary[key].doctype\r\n        ) + _document.documentElement.innerHTML + \"</html>\"\r\n        #console.log source\r\n        frame.setAttribute('srcdoc', source)\r\n\r\n  ###!\r\n  # finish and return string with complete all resourses in one HTML\r\n  # @param {Number} counter - counter of tags\r\n  # @param {Number} counter1 - counter of attributes\r\n  ###\r\n  finalize = (counter, counter1, counter2) ->\r\n    console.log counter, counter1, flag\r\n    if counter == 0 and counter1 == 0 and counter2 == 0 and flag == true\r\n      createNewObj dictionary[\"\"],\"\"\r\n      _url = dictionary[\"\"].url\r\n      _document = dictionary[\"\"].document\r\n      defaultCleanUp _document, _url\r\n      cleanUp?(_document, _url)\r\n      result = getAttribute(\r\n        dictionary[\"\"].header, dictionary[\"\"].doctype\r\n      ) + _document.documentElement.innerHTML + \"</html>\"\r\n      done?(result)\r\n      dictionary = {}\r\n      flag = false\r\n\r\n\r\n  # START\r\n  chrome.tabs.executeScript tabID,\r\n    code: \"(\" + getSource.toString() + \")()\" # transform function to the\r\n                                             # string and wrap it into the\r\n                                             # closure to execute it\r\n                                             # immidiatelly after\r\n                                             # injecting\r\n    allFrames: true,\r\n    matchAboutBlank: true\r\n  , (arrays) ->\r\n    #console.log arrays\r\n    for dom in arrays\r\n      obj =\r\n        url: dom[0]\r\n        header: dom[2]\r\n        document: getDocument(dom[1],dom[0])\r\n        framesIdx: dom[4]\r\n        doctype: dom[5]\r\n        actualUrls: dom[6]\r\n        styleSheets: dom[7]\r\n      dictionary[dom[3]] = obj\r\n      #console.log dom[6]\r\n    parse(finalize)\r\n\r\nmodule.exports = getPage\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/page-catch.coffee","xhrToBase64 = (url, elem, callback) ->\r\n  console.log \"BASE64URL\", url\r\n\r\n  if(url.indexOf(\"data:\") >= 0 || url.length < 10)\r\n    callback null, elem, url\r\n  else\r\n    #console.log \"xhr-to-base64: Url='#{url}'\"\r\n    xhr = new XMLHttpRequest()\r\n    xhr.open 'GET', url, true\r\n    xhr.responseType = 'blob'\r\n    reader = new FileReader()\r\n\r\n    xhr.onload = (e) ->\r\n      #console.log \"xhr-to-base64: XHR LOAD\"\r\n      if this.status != 200\r\n        callback null, elem, \" \", url\r\n      else\r\n        blob = this.response\r\n        reader.onloadend = () ->\r\n          callback null, elem, reader.result, url\r\n        reader.readAsDataURL(blob)\r\n\r\n    xhr.onerror = (e) ->\r\n      console.error \"XHR Error \" + \\\r\n        e.target.status + \\\r\n        \" occurred while receiving the document.\"\r\n      callback e, elem, \" \",url\r\n\r\n    xhr.send()\r\n\r\nmodule.exports = xhrToBase64\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/xhr-to-base64.coffee","module.exports = (url, main,protocol) ->\r\n  flag = false\r\n  if (\r\n    (url[0] == '\"' and url[url.length - 1] == '\"') or\r\n    (url[0] == \"'\" and url[url.length - 1] == \"'\")\r\n  )\r\n    url = url.substr 1, url.length - 2\r\n  if url.startsWith('data:')\r\n    #console.log \"DATA\", url\r\n    return url\r\n  url = url.replace(/\\s/g, '')\r\n  #console.warn \"URL: \", url\r\n  #console.warn \"MAIN: \", main\r\n  main = main.split('#')[0]\r\n\r\n  if url.startsWith('//')\r\n    return protocol + url\r\n\r\n  if url.match(/^[\\w\\-_\\d]+:/)\r\n    return url\r\n\r\n  if url[0] == '/' and url[1] != '/'\r\n    flag = true\r\n    mainURLS = main.split('/')\r\n    mainURLS = mainURLS.slice(0, 3)\r\n    main = mainURLS.join('/')\r\n    #console.log main+url\r\n    return main+url\r\n  mainURLS = main.split('/')\r\n  #console.log main\r\n  #console.log mainURLS\r\n  #console.log mainURLS[mainURLS.length-1].indexOf('.')\r\n  if '.' in mainURLS[mainURLS.length-1] and not flag\r\n    mainURLS.pop()\r\n  mainURLS.pop() if mainURLS[mainURLS.length-1] == \"\"\r\n    #console.log(mainURLS)\r\n  indexURLS = url.split('/')\r\n  #console.log(mainURLS)\r\n  #console.log indexURLS\r\n  for indexURL in indexURLS\r\n    if indexURL == '..'\r\n      mainURLS.pop()\r\n    else if indexURL == '.'\r\n      continue\r\n    else\r\n      mainURLS.push(indexURL)\r\n  #console.log \"LASTURL\", mainURLS.join('/')\r\n  return mainURLS.join('/')\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/get-relative-link.coffee","module.exports = (url) ->\r\n  try\r\n    #console.log \"xhr: Url ='#{url}'\"\r\n    xhr = new XMLHttpRequest()\r\n    xhr.open 'GET', url, false\r\n    xhr.send()\r\n    if xhr.status ==200\r\n      return xhr.responseText\r\n    else\r\n      return \" \"\r\n  catch e\r\n    console.error \"XHR\", e.stack\r\n    return \" \"\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/xhr.coffee","convertURL = require '../modules/get-relative-link.coffee'\r\nconvertToBase64 = require '../modules/xhr-to-base64.coffee'\r\ngetXHR = require '../modules/xhr.coffee'\r\n\r\n\r\ngetCounter = (urlMas, actualUrls) ->\r\n  counter = 0\r\n  for i in [0...urlMas.length]\r\n    if actualUrls[urlMas[i]]\r\n      counter++\r\n  return counter\r\n\r\n\r\naddNewActualUrls = (htmlText, actualUrls, source) ->\r\n  re = /@font-face\\s*\\{[\\s\\S]*?src\\s*:\\s*(?:url\\(\\s*(['\"])?([\\s\\S]*?)\\1\\s*\\))+[\\s\\S]*?.*?\\}/g\r\n  re1 = /url\\(\\s*(['\"])?([\\s\\S]*?)\\1\\s*\\)/g\r\n  while (obj = re.exec(htmlText))?\r\n    while (url = re1.exec(obj[0]))?\r\n      actualUrls[convertURL(url[2], source)] = true\r\n  return actualUrls\r\n\r\nmodule.exports = (src, element, source, dom, attributes, callback) ->\r\n  flag = false\r\n  if src.indexOf(\"@import\") > -1\r\n    re = /@import\\s+(?:url\\((['\"])?([\\s\\S]*?)\\1\\)|(['\"])?([\\s\\S]*?)\\3)\\s*[^;]*?(?:;|$)/gmi\r\n    src = src.replace(re, (str) ->\r\n      temp = re.exec(str)\r\n      if temp[2]?\r\n        return getXHR(convertURL(temp[2], source))\r\n      if temp[4]?\r\n        return getXHR(convertURL(temp[4], source))\r\n    )\r\n  if(src.indexOf(\"url(\") < 0)\r\n    callback null, element, dom, src, attributes\r\n  else\r\n    #console.log \"inline-css:\", src, element\r\n    urlMas = []\r\n    elemMas = []\r\n    convMas = []\r\n    lastIndex = 0\r\n    regExp =  /([\\s\\S]*?url\\()\\s*(['\"]?)([\\s\\S]*?)\\2\\s*(\\))/gmi\r\n    obj = regExp.exec(src)\r\n    while obj?\r\n      elemMas.push obj[1], obj[4]\r\n      urlMas.push convertURL obj[3], source\r\n      lastIndex = regExp.lastIndex\r\n      if src.indexOf('url(',lastIndex+1) > -1\r\n        obj = regExp.exec(src)\r\n      else\r\n        elemMas.push src[lastIndex..]\r\n        lastIndex = src.length\r\n        break\r\n    elemMas.push src[lastIndex..]\r\n    dom.actualUrls = addNewActualUrls(src,dom.actualUrls, source)\r\n    console.log \"MASIVE\", urlMas, dom.actualUrls\r\n    counter = getCounter(urlMas, dom.actualUrls)\r\n    for i in [0...urlMas.length]\r\n      if dom.actualUrls[urlMas[i]]\r\n        flag = true\r\n        dom.actualUrls[urlMas[i]]\r\n        console.log 'COUNTER++',counter\r\n        convertToBase64 urlMas[i], element, (error, obj, result, url) ->\r\n          counter--\r\n          console.log counter\r\n          if error?\r\n            console.error \"Error base64:\", error.stack\r\n          else\r\n            dom.actualUrls[url] = result\r\n          if counter == 0\r\n            console.log dom.actualUrls\r\n            src = []\r\n            index = 0\r\n            urlIndex = 0\r\n            while index < elemMas.length\r\n              src.push elemMas[index]\r\n              index++\r\n              if urlMas[urlIndex]?\r\n                if dom.actualUrls[urlMas[urlIndex]] or urlMas[urlIndex].startsWith('data:')\r\n                  #console.log 'URL', dom.actualUrls[urlMas[urlIndex]]\r\n                  if urlMas[urlIndex].startsWith('data:')\r\n                    src.push '\"' + urlMas[urlIndex] + '\"'\r\n                  else\r\n                    src.push '\"'+ dom.actualUrls[urlMas[urlIndex]] + '\"'\r\n                else\r\n                  src.push '\"\"'\r\n              if(elemMas[index]?)\r\n                #console.log \"SECOND_ELEM\", elemMas[index]\r\n                src.push(elemMas[index])\r\n              index++\r\n              urlIndex++\r\n            callback null, element, dom, src.join(\"\"), attributes\r\n    if !flag\r\n      callback null, element, dom, elemMas.join(''), attributes\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/coffeelint-loader!./src/modules/inline-css.coffee"],"sourceRoot":""}